# **ëŠ˜ë¹„ìƒë‹´ (ëŠ˜ í•¨ê»˜ í•˜ëŠ” ë¹„ëŒ€ë©´ ìƒë‹´)**

## í•œ ì¤„ ì†Œê°œ

### **`ìì‹ ì˜ ë§ ëª» í•  ê³ ë¯¼ì„ ìì‹ ì˜ ê°œì„±ì„ ë“œëŸ¬ë‚¸ ìºë¦­í„°ë¥¼ í†µí•´ ìµëª…ìœ¼ë¡œ ììœ ë¡­ê²Œ ì†Œí†µí•˜ê¸° ìœ„í•œ íë§ ì›¹ ì„œë¹„ìŠ¤`**

<br/>

![ëŠ˜ë¹„ìƒë‹´](./screenshot/ëŠ˜ë¹„ìƒë‹´.gif)

<br/><br/>

## ê¸°íš ì˜ë„
### 1. ì‚¬ëŒë“¤ì€ ëˆ„êµ¬ë‚˜ ìì‹ ë§Œì˜ ê³ ë¯¼ì„ ì•ˆê³  ì‚´ì•„ê°‘ë‹ˆë‹¤.

<br/>

### 2. ë°©ì†¡ì„ ë³´ë”ë¼ë„ ê³ ë¯¼ìƒë‹´ì— ëŒ€í•œ í”„ë¡œê·¸ë¨ì€ ê¾¸ì¤€íˆ ì¸ê¸°ë¥¼ ëŒê³  ìˆë¯€ì—¬ ì´ë¥¼ í†µí•´ ì‚¬ëŒë“¤ì˜ ë‹ˆì¦ˆê°€ í™•ì‹¤í•œ ë¶„ì•¼ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

### 3. í•˜ì§€ë§Œ, ê°€ë²¼ìš´ ê³ ë¯¼ì„ í† ë¡œí•˜ë ¤ê³  ì‹¬ë¦¬ ìƒë‹´ì†Œë¥¼ ì°¾ê¸°ëŠ” ì–´ë µìŠµë‹ˆë‹¤. ì‹¬ë¦¬ìƒë‹´ì†ŒëŠ” ê³ ë¯¼ì„ í† ë¡œí•˜ëŸ¬ ê°€ëŠ” ê²ƒ ë³´ë‹¨, ìš°ìš¸ì¦ì„ ê²ªê³  ìˆëŠ” ì‚¬ëŒë“¤ì´ ì‹¬ë¦¬ì¹˜ë£Œë¥¼ ìœ„í•œ ëª©ì ì„±ì´ ë” ê°•í•©ë‹ˆë‹¤.

<br/>

### 4. ê°€ê¹Œìš´ ì¹œêµ¬, ê°€ì¡±ì—ê²Œ ê³ ë¯¼ì„ í„¸ì–´ë†“ìœ¼ë©´ ë˜ì§€ ì•Šì„ê¹Œ? í•˜ì§€ë§Œ, ê°€ê¹Œìš´ ì‚¬ëŒë“¤ì´ê¸°ì— ë§í•˜ê¸° í˜ë“  ê³ ë¯¼ë„ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤.

<br/>

### 5. ì´ëŸ° ***ë‹¤ì–‘í•œ ê³ ë¯¼ë“¤ì„ ìµëª…ì„±ì„ ë³´ì¥í•œ ê³ ë¯¼ í† ë¡œì¥***ì„ ë§Œë“¤ì–´ì£¼ë©´ ì–´ë–¨ê¹Œ? ë¼ëŠ” ì•„ì´ë””ì–´ì—ì„œ ê¸°íší•˜ê²Œ ëœ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤.

<br/><br/>


## í”„ë¡œì íŠ¸ íŠ¹ì¥ì 
- ìµëª…ì„±ì„ í†µí•˜ì—¬ ìì‹ ì˜ ê³ ë¯¼ì„ ììœ ë¡­ê²Œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ êµ¬í˜„
- ì„œë¡œê°€ ì„œë¡œì—ê²Œ ìƒë‹´ì‚¬ê°€ ë˜ì–´ ê°ìì˜ ê²½í—˜ì— ê¸°ë°˜í•œ ìƒë‹´ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ êµ¬í˜„
- ìì‹ ì˜ ê²½í—˜ì„ í•œ ëˆˆì— ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ êµ¬í˜„
- ì‚¬ìš©ì ì¹œí™”ì ì¸ ë¶€ë“œëŸ¬ìš´ UI / UX êµ¬í˜„

<br/><br/>

## í”„ë¡œì íŠ¸ ì°¨ë³„ì„±
- â€˜ìƒë‹´â€™ì´ë€ ë‹¤ì†Œ ë¬´ê±°ìš´ ì´ë¯¸ì§€ë¥¼ ê°€ë³ê²Œ í’€ì–´ë‚¸ë‹¤.
- ìì‹ ë§Œì˜ ìºë¦­í„°ë¥¼ í†µí•´ ìµëª…ì„±ì„ ë³´ì¥í•˜ë˜, ìì‹ ë§Œì˜ ê°œì„±ì„ ë“œëŸ¬ë‚¸ ì±„ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.
- ì‹¬ì  ì•ˆì •ê°ì„ ì£¼ëŠ” ë¸”ë£¨ ê³„ì—´ì˜ ìƒ‰ì±„ ì‚¬ìš©
- ë¶€ë“œëŸ¬ìš´ ë””ìì¸ê³¼ ììœ ë¡œìš´ ì»¤ë®¤ë‹ˆí‹° ì‚¬ì´íŠ¸

<br/><br/><br/>

# íŒ€ êµ¬ì„±
![íŒ€ì›ì†Œê°œ](./screenshot/íŒ€ì›ì†Œê°œ.PNG)
## í”„ë¡œì íŠ¸ ì§„í–‰ê¸°ê°„
- 2022.01.10 ~ 2022.02.18 (6ì£¼)

<br/>

## Front-End
- ì •ì¬í˜¸ : ì´ê´„ íŒ€ì¥(í”„ë¡ íŠ¸) + WebSocket(SockJS + STOMP) + ë””ìì¸ + ë°œí‘œ
- ê¹€ë™í˜„ : í”„ë¡ íŠ¸ + OpenVidu + ë””ìì¸
- ìµœì˜ì§„ : í”„ë¡ íŠ¸ + OpenVidu + ë””ìì¸

<br>  

## Back-End
- ê¹€í˜„ë¯¼ : ë°±ì—”ë“œ íŒ€ì¥ + ì†Œì…œ ë¡œê·¸ì¸(OAuth2.0) + PPT
- ë°•ì˜ì°¬ : ë°±ì—”ë“œ + ì¸í”„ë¼ + AWS S3
- ì–´ì„œë¹ˆ : ë°±ì—”ë“œ + WebSocket(SockJS + STOMP) + UCC

<br>

## ì£¼ìš” í˜‘ì—… íˆ´
- Jira
- MatterMost
- GitLap
- Notion
  - https://light-caption-620.notion.site/17ad9e539b0249ebabb1b8e9331aa460

<br/><br/><br/>

# ì£¼ìš” ê¸°ìˆ 
![ì£¼ìš”ê¸°ìˆ ](./screenshot/ì£¼ìš”ê¸°ìˆ .PNG)

## ê¸°ìˆ  ìŠ¤íƒ
- Front-end : Vue3, Vuex, OpenVidu, WebSocket(Sock JS + STOMP)
- Back-end: Spring Boot, JPA, OAuth(2.0), WebSocket(Sock JS + STOMP)
- Database : MySQL, AWS S3
- Infra : AWS EC2, Docker, Jenkins

</br></br>

## ê¸°ìˆ  íŠ¹ì´ì 
- ì†Œì…œ ë¡œê·¸ì¸(OAuth2.0)ì„ í™œìš©í•œ êµ¬ê¸€, ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„
- WebSocket(Sock JS + STOMP)ì„ ì´ìš©í•œ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„
- OpenViduë¥¼ í™œìš©í•œ í™”ìƒ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„
- AWS S3ì„ ì´ìš©í•œ í”„ë¡œí•„ ì´ë¯¸ì§€ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸°

</br></br>

## êµ¬í˜„ ê¸°ìˆ  ë‚´ìš©
- Amazon EC2 ìœ„ì— Dockerê°€ ë™ì‘í•©ë‹ˆë‹¤.
- Docker ì•ˆì—ëŠ” Vue, SpringBoot, WebRTC ê¸°ìˆ  ê´€ë ¨ í”„ë ˆì„ì›Œí¬ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë“¤ì´ ì˜¬ë¼ê°€ êµ¬ë™ë©ë‹ˆë‹¤.
- Vueê°€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì¤‘ì¶”ê°€ ë˜ì–´ ëŠ˜ë¹„ìƒë‹´ ì„œë¹„ìŠ¤ì˜ ë‹¤ë¥¸ ì„œë²„ë“¤ê³¼ í†µì‹ ì„ í•©ë‹ˆë‹¤.
- OpenViduëŠ” Kurentoë¥¼ Baseë¡œ í•œ í”„ë ˆì„ì›Œí¬ì´ë©°, Vueì™€ Web RTC API í†µì‹ ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- Spring Bootì™€ Rest API í†µì‹ ì„ í•˜ë©° SPA(Single Page Application)ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- ì±„íŒ… ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ WebSocket í”„ë¡œí† ì½œ, Sock JSë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³ , ì†Œì…œ ë¡œê·¸ì¸ì„ ìœ„í•´ êµ¬ê¸€, ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ì™¸ë¶€ ì„œë²„ì™€ í†µì‹ í•©ë‹ˆë‹¤.
- Amazon S3ëŠ” í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.


<br/><br/><br/>

# **ì„œë¹„ìŠ¤ ì†Œê°œ**

<br/>

## ì‹œì‘ í™”ë©´
![í™ˆ1](screenshot/í™ˆ1.png)
![í™ˆ2](screenshot/í™ˆ2.png)

## ëŠ˜ë¹„ìƒë‹´ì˜ ì£¼ìš” ì„œë¹„ìŠ¤
  ### 1. ê³ í•´ì„±ì‚¬
- **`â€œë‹¹ì‹ ì˜ ë§ˆìŒì— ë”°ìŠ¤í•œ ê³µê°ì„ ë“œë ¤ìš”.â€`**
    - ëˆ„êµ¬ë‚˜ ë¶€ë‹´ì—†ì´ ë§í•˜ê¸° í˜ë“  ì†ë§ˆìŒì„ ìì‹ ë§Œì˜ ìºë¦­í„°ë¥¼ í†µí•´ ìµëª…ìœ¼ë¡œ í„¸ì–´ë†“ëŠ” ì„œë¹„ìŠ¤!
    - ë‚˜ì˜ ê³ ë¯¼ì€ ë„ˆì˜ ê³ ë¯¼, ë„ˆì˜ ê³ ë¯¼ì€ ë‚˜ì˜ ê³ ë¯¼! ë§ˆìŒìœ¼ë¡œ ì†Œí†µí•´ìš”~ğŸ’Œ
    - ê³ ë¦½ê°ê³¼ ìš°ìš¸ì¦ í•´ì†Œë¥¼ ìœ„í•œ ììœ ë¡œìš´ Talk Talk ì„œë¹„ìŠ¤!
    - ì‚¬ìš©ìë“¤ì€ ì‚¬ì—°ì— ê³µê°í•˜ë©° ë‹¤ì–‘í•œ ë°˜ì‘ë“¤ì„ í†µí•´ ê³µê°ì„ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤!

<br/>

  ### 2. ê³ ë¯¼ìƒë‹´!
  - **`â€œë§ì€ ë§ˆìŒì„ ë‹´ëŠ”ë‹¤. ê·¸ë˜ì„œ ë§ì—ë„ ì²´ì˜¨ì´ ìˆë‹¤.â€`**
    - ì·¨ì—…, ì—°ì• , ì§„í•™ ë“± í˜ë“  ê³ ë¯¼ì— ëŒ€í•œ í•´ê²°ì±…ì„ ì–»ì„ ìˆ˜ ìˆëŠ” ì‹¬ë¦¬ìƒë‹´ ì„œë¹„ìŠ¤!
    - ìš°ë¦¬ ëª¨ë‘ ìƒë‹´ê°€ê°€ ë˜ì–´ ë„ì›€ì„ ê±´ë‚¼ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤!
    - ëŒ€ë©´ ìƒë‹´ì€ ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ì‚¬ëŒë“¤ ìœ„í•œ ë¹„ëŒ€ë©´ ìƒë‹´ ì„œë¹„ìŠ¤!

<br/><br/><br/>

## íšŒì›ê°€ì…

![íšŒì›ê°€ì…](screenshot/íšŒì›ê°€ì….png)

  ### ìœ íš¨ì„± ê²€ì‚¬
  - íšŒì›ê°€ì…ì‹œ ì´ë©”ì¼, ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸, ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ì…ë ¥ë°›ìœ¼ë©° **ìœ íš¨ì„± ê²€ì‚¬**ë¥¼ í†µí•´ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
    -  ì´ë©”ì¼: ì´ë©”ì¼ í˜•ì‹ì„ ê°–ì¶°ì•¼ í•œë‹¤.
    -  ë‹‰ë„¤ì„: ì¤‘ë³µ ê²€ì‚¬ë¥¼ í†µí•´ ìœ ì¼í•œ ë‹‰ë„¤ì„ë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.
    -  ë¹„ë°€ë²ˆí˜¸: ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ë‚˜ ì´ìƒ í¬í•¨í•˜ë„ë¡ í•œë‹¤.
    -  ë¹„ë°€ë²ˆí˜¸ í™•ì¸: ë¹„ë°€ë²ˆí˜¸ì™€ ë™ì¼í•œ ê°’ì„ì„ í™•ì¸í•œë‹¤.

<br/><br/><br/>

## ë¡œê·¸ì¸

![ë¡œê·¸ì¸](screenshot/ë¡œê·¸ì¸.png)
### 1. ë¡œê·¸ì¸
- íšŒì› ê°€ì…í•œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì–´ë²„ë ¸ë‹¤ë©´, ì´ë©”ì¼ì„ ì…ë ¥í•˜ê³ , ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
- ê·¸ëŸ¬ë©´ í•´ë‹¹ ì´ë©”ì¼ë¡œ ì„ì‹œë¹„ë°€ë²ˆí˜¸ë¥¼ ì „ì†¡ë°›ê²Œ ë˜ê³  ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ í†µí•´ ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

### 2. ì†Œì…œ ë¡œê·¸ì¸
- ì´ë¯¸ ë³´ìœ í•˜ê³  ìˆëŠ” ê³„ì •ì„ í†µí•´ ì„œë¹„ìŠ¤ ê°€ì…ì´ ê°€ëŠ¥í•œ **ì†Œì…œ ë¡œê·¸ì¸** ê¸°ëŠ¥ì„ í†µí•´ ì‚¬ìš©ìì˜ **í¸ë¦¬ì„±**ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.
- êµ¬ê¸€, ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ìì‹ ì´ ê°€ì…ë˜ì–´ ìˆëŠ” ì›í•˜ëŠ” ê³„ì •ìœ¼ë¡œ ì‰½ê²Œ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br/><br/><br/>

# í”„ë¡œí•„

![í”„ë¡œí•„1](screenshot/í”„ë¡œí•„1.png)
![í”„ë¡œí•„2](screenshot/í”„ë¡œí•„2.png)
 - ì‚¬ìš©ìëŠ” í”„ë¡œí•„ í˜ì´ì§€ì—ì„œ ì„œë¹„ìŠ¤ì— ì‚¬ìš©ë˜ëŠ” ìì‹ ì˜ ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì› íƒˆí‡´ì™€ ê°™ì€ íšŒì› ì •ë³´ì— ëŒ€í•´ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - í”„ë¡œí•„ ì´ë¯¸ì§€, ë§ˆìŠ¤í¬, ë°°ê²½ê³¼ ê°™ì´ ì„œë¹„ìŠ¤ ì´ìš©ì— í•„ìš”í•œ ì •ë³´ë“¤ì— ëŒ€í•´ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ìƒë‹´ê°€ ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë“±ë¡ ë° ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br><br>

## ê°œì¸ í”„ë¡œí•„
![ë‹‰ë„¤ì„ë³€ê²½](screenshot/ë‹‰ë„¤ì„ë³€ê²½.png)
- ë‹‰ë„¤ì„, í”„ë¡œí•„ ì´ë¯¸ì§€ ë° ìºë¦­í„° ì •ë³´ë¥¼ ì¡°íšŒ ë° ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ í†µí•´ ì‚¬ìš©ì ë³¸ì¸ì„ì´ í™•ì¸ëœ ê²½ìš° ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ê³¼ íšŒì›íƒˆí‡´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

## í”„ë¡œí•„ì´ë¯¸ì§€
![í”„ë¡œí•„ì´ë¯¸ì§€ë°ë§ˆìŠ¤í¬ë³€ê²½](screenshot/í”„ë¡œí•„ì´ë¯¸ì§€ë°ë§ˆìŠ¤í¬ë³€ê²½.png)
- ììœ ë¡­ê²Œ í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ ì»¤ìŠ¤í…€í•˜ì—¬ ì„œë¹„ìŠ¤ ì´ìš© ì‹œ ìì‹ ì˜ ê°œì„±ì„ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br><br>

## ìºë¦­í„°
![ë§ˆìŠ¤í¬](./screenshot/mask.JPG)
- ì‚¬ìš©ìëŠ” ìì‹ ì´ ì›í•˜ëŠ” ìºë¦­í„°ì™€ ë°°ê²½í™”ë©´ì„ ê³ ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- 9ê°€ì§€ì˜ ìºë¦­í„° ì¤‘ì—ì„œ ìì‹ ì´ ë§ˆìŒì— ë“œëŠ” ìºë¦­í„°ë¥¼ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.

<br><br>

## ë°°ê²½
![ë°°ê²½](./screenshot/background.JPG)
- ì´í›„ ì‚¬ìš©ìì˜ ì·¨í–¥ì— ë”°ë¼ 4ê°€ì§€ì˜ ë°°ê²½ ì¤‘ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì ìš©ëœ ìºë¦­í„°ì™€ ë°°ê²½ì€ ì„œë¹„ìŠ¤ ì´ìš© ì¤‘ ì–¸ì œë“  ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

## ìƒë‹´ê°€ í”„ë¡œí•„
![ìƒë‹´ê°€ë“±ë¡](screenshot/ìƒë‹´ê°€ë“±ë¡.png)
- ì‚¬ìš©ìëŠ” 6ê°€ì§€ ì£¼ì œì™€ ê°„ë‹¨í•œ í•œ ì¤„ ì†Œê°œë¥¼ í†µí•´ ì†ì‰½ê²Œ ìƒë‹´ê°€ ë“±ë¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì‘ì„±í•œ ì£¼ì œ, í•œ ì¤„ ì†Œê°œëŠ” ì–¸ì œë“  ì¡°íšŒ ë° ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

## ê³µê°í•œ ìƒë‹´ê°€
![ê³µê°í•œìƒë‹´ê°€](screenshot/ê³µê°í•œìƒë‹´ê°€.png)
- ê³ ë¯¼ìƒë‹´ì„ í†µí•´ ë§Œë‚œ ìƒë‹´ê°€ë¥¼ **ê³µê°ğŸ’—**í•  ìˆ˜ ìˆìœ¼ë©°, ê³µê°í•œ ìƒë‹´ê°€ ë‚´ì—­ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/><br/>


# ê³ í•´ì„±ì‚¬

 <br>

## ê³ í•´ì„±ì‚¬ ë©”ì¸ í˜ì´ì§€
![ê³ í•´ì„±ì‚¬](./screenshot/ê³ í•´ì„±ì‚¬.PNG)
-   ëŠ˜ë¹„ìƒë‹´ì€ ì„œë¡œë¥¼ ì•Œì§€ ëª»í•˜ëŠ” ì‚¬ìš©ìë“¤ë¼ë¦¬ í¸í•˜ê²Œ ë§ˆìŒì„ í„¸ì–´ë†“ì„ ìˆ˜ ìˆëŠ” ê³ í•´ì„±ì‚¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

<br>


![ê³ í•´ì„±ì‚¬](./screenshot/ê³ í•´ì„±ì‚¬ì£¼ì œ.JPG)

- ë‹¤ì–‘í•œ ì£¼ì œë“¤ ì¤‘ ì›í•˜ëŠ” ì£¼ì œë¥¼ ì„ íƒí•˜ì—¬ ì£¼ì œì— í•´ë‹¹í•˜ëŠ” ë°©ë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë‹‰ë„¤ì„, ë°©ì œëª©, ë°©ì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰í•˜ì—¬ ë°©ì„ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.


<br>


## ë°© ìƒì„±í•˜ê¸°
![ë°©ìƒì„±ë²„íŠ¼](./screenshot/ë°©ìƒì„±ë²„íŠ¼.JPG)

- ë§Œì•½ ì›í•˜ëŠ” ë°©ì´ ì—†ë‹¤ë©´ ìì‹ ì´ ì§ì ‘ ë°©ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ìš°ì¸¡ í”„ë¡œí•„ ë°‘ì˜ ìƒì„±í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë°©ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<br/><br/>

![ë°©ìƒì„±](./screenshot/ë°©ìƒì„±.JPG)

- ê³ í•´ì„±ì‚¬ ìƒì„±í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°© ì„¤ì • ì°½ì´ ëœ¹ë‹ˆë‹¤.
- ì œëª©, ì£¼ì œ, ì°¸ê°€ì ìˆ˜, ë°© ì„¤ëª…ì„ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì°¸ê°€ì ìˆ˜ëŠ” ìµœëŒ€ 6ëª…ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.



<br><br>

![ì¤‘ê°„í˜ì´ì§€](./screenshot/ê³ í•´ì„±ì‚¬ì¤‘ê°„.JPG)

- ë°© ìƒì„±ì´ ì™„ë£Œë˜ë©´ ì¹´ë©”ë¼ì™€ ë§ˆì´í¬ ìƒíƒœë¥¼ ì ê²€í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ í˜ì´ì§€ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.
- ì°¸ê°€í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°©ì— ì°¸ê°€í•˜ê²Œ ë©ë‹ˆë‹¤.

<br><br>

## í™”ìƒì±„íŒ…

![ê³ í•´ì„±ì‚¬](./screenshot/confession.JPG)
  - ê³ í•´ì„±ì‚¬ ì„œë¹„ìŠ¤ëŠ” ìºë¦­í„°ë¥¼ ì´ìš©í•´ ìì‹ ì˜ ì–¼êµ´ì„ ê°€ë¦¬ê³  ìµëª…ì„±ì„ ìœ ì§€í•˜ë©° ëŒ€í™”ë¥¼ ë‚˜ëˆ•ë‹ˆë‹¤.

<br>

![ì´ëª¨ì§€](./screenshot/ê³ í•´ì„±ì‚¬ì´ëª¨ì§€.JPG)

  - ë°˜ì‘ì„ ëˆ„ë¥´ë©´ ì´ëª¨ì§€ë¥¼ ì´ìš©í•´ ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ì— í˜¸ì‘ì„ í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

![ê³ í•´ì„±ì‚¬ì‹ ê³ í•˜ê¸°](./screenshot/ê³ í•´ì„±ì‚¬ì‹ ê³ í•˜ê¸°.JPG)
  - ì¢…ë£Œë¥¼ ëˆ„ë¥´ë©´ í™”ìƒì±„íŒ…ì´ ì¢…ë£Œë˜ê³  ì•…ì„± ì‚¬ìš©ìë¥¼ ì‹ ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

![ê³ í•´ì„±ì‚¬ ì‹ ê³ í•˜ê¸°](./screenshot/ê³ í•´ì„±ì‚¬ì‹ ê³ í•˜ê¸°ëŒ€ìƒ.JPG)
- ì•…ì„± ì‚¬ìš©ìì˜ ë‹‰ë„¤ì„ì„ ì„ íƒí•´ ì‹ ê³  ë‚´ìš©ì„ ì…ë ¥í•˜ê³  ë³´ë‚´ê¸°ë¥¼ í´ë¦­í•˜ë©´ ì‹ ê³ ê°€ ì™„ë£Œë©ë‹ˆë‹¤.

- í™ˆìœ¼ë¡œë¥¼ í´ë¦­í•˜ë©´ ê³ í•´ì„±ì‚¬ í˜ì´ì§€ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.

<br/><br/><br/>


# ê³ ë¯¼ìƒë‹´
 | ëŠ˜ë¹„ìƒë‹´ì€ ìì‹ ì˜ ê³ ë¯¼ì„ 1ëŒ€1ë¡œ ë‚˜ëˆ„ê³  ê³ ë¯¼ì— ëŒ€í•œ ë‹µì„ êµ¬í•˜ëŠ” ê³ ë¯¼ìƒë‹´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. 
 <br>

![ê³ ë¯¼ìƒë‹´_í˜ì´ì§€](./screenshot/ê³ ë¯¼ìƒë‹´_ë©”ì¸.PNG)

<br><br>

## ìƒë‹´ê°€ í”„ë¡œí•„ ì¡°íšŒí•˜ê¸°
![ê³ ë¯¼ìƒë‹´_ìƒë‹´ê°€í”„ë¡œí•„ì¡°íšŒ](./screenshot/ê³ ë¯¼ìƒë‹´_ìƒë‹´ê°€í”„ë¡œí•„ì¡°íšŒ.PNG)
 - ê³ ë¯¼ìƒë‹´ í˜ì´ì§€ì—ì„œëŠ” ìƒë‹´ê°€ë¡œ ì‹ ì²­í•œ ëŠ˜ë¹„ ìœ ì €ë“¤ì˜ í”„ë¡œí•„ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

## ì„ í˜¸í•˜ëŠ” ìƒë‹´ê°€ ì¶”ê°€í•˜ê¸°.
![ìƒë‹´ê°€_ê³µê°ì¶”ê°€](./screenshot/ê³µê°í•œ_ìƒë‹´ê°€_ì¶”ê°€.PNG)
- ìƒë‹´ê°€ í”„ë¡œí•„ì˜ **ê³µê°ğŸ’—** ë²„íŠ¼ì„ ì´ìš©í•´ ì„ í˜¸í•˜ëŠ” ìƒë‹´ê°€ ëª©ë¡ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br><br>

## 1ëŒ€1 ëŒ€í™”ì‹ ì²­
![ì±„íŒ…ë°©](./screenshot/chat.JPG)
 - ìƒë‹´ê°€ í”„ë¡œí•„ì˜ **1:1 ì±„íŒ…í•˜ê¸°** ë²„íŠ¼ì„ í†µí•´ ëŒ€í™”ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
 - ì±„íŒ…ë°©ì—ì„œ ìƒë‹´ì„ ì§„í–‰í•˜ê¸° ì „ ê°„ë‹¨í•œ ì§ˆë¬¸ ë˜ëŠ” ëŒ€í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
 - ìƒë‹´ê°€ê°€ ë§ˆìŒì— ë“ ë‹¤ë©´ ìƒë‹´ì„ ìš”ì²­í•  ìˆ˜ ìˆê³  ìƒë‹´ê°€ëŠ” í™”ìƒì±„íŒ…ë°©ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

<br><br>

## í™”ìƒ ì±„íŒ…ë°© ìƒì„±
![ê³ ë¯¼ìƒë‹´_ë°©ìƒì„±](./screenshot/ê³ ë¯¼ìƒë‹´_ë°©ìƒì„±.PNG)
 - 1:1 ì±„íŒ…ë°©ì—ì„œ ìƒë‹´ê°€ëŠ” í™”ìƒì±„íŒ… ìƒì„±ë²„íŠ¼ì„ í†µí•´ í™”ìƒì±„íŒ…ë°© ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

 ## í™”ìƒ ì±„íŒ…ë°© ì…ì¥
 ![ê³ ë¯¼ìƒë‹´_ë°©ì…ì¥](./screenshot/ê³ ë¯¼ìƒë‹´_ë°©ì…ì¥.PNG)
 - 1:1 ì±„íŒ…ë°©ì—ì„œ ìƒë‹´ìëŠ” í™”ìƒì±„íŒ…ì°¸ê°€ ë²„íŠ¼ì„ í†µí•´ í™”ìƒì±„íŒ…ë°© ì…ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br><br>

## ê³ ë¯¼ìƒë‹´ í™”ìƒì±„íŒ…

![ê³ ë¯¼ìƒë‹´](./screenshot/advice.JPG)
 - ê³ ë¯¼ìƒë‹´ì€ 1ëŒ€1ì˜ ìƒë‹´ì„ í†µí•´ ê³ ë¯¼ê±°ë¦¬ë¥¼ í„¸ì–´ë†“ê³  ì¡°ì–¸ê³¼ í•´ê²°ì±…ì„ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ìì‹ ì˜ ê³ ë¯¼ ë¶„ì•¼ì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ì‚¬ëŒë“¤ì—ê²Œ ì¸ì¦ ë°›ì€ ìƒë‹´ê°€ì˜ ì¡°ì–¸ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ìš°ì¸¡ ìƒë‹¨ì˜ ë²„íŠ¼ì„ í†µí•´ ì¹´ë©”ë¼,ë§ˆì´í¬ ON/OFF ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ìš°ì¸¡ ìƒë‹¨ì˜ ë©”ì‹œì§€ ë²„íŠ¼ì„ ì´ìš©í•´ ì±„íŒ…ìœ¼ë¡œ ì†Œí†µ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ìš°ì¸¡ ìƒë‹¨ì˜ ì¢…ë£Œ ë²„íŠ¼ì„ ì´ìš©í•´ í™”ìƒì±„íŒ…ì„ ì¢…ë£Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br><br>

![ê³ ë¯¼ìƒë‹´ ì´í›„](./screenshot/advice_after.JPG)

- ê³ ë¯¼ìƒë‹´ì´ ì¢…ë£Œ ëœ ì´í›„ì—ëŠ” ì¹­ì°¬í•˜ê¸°ì™€ ì‹ ê³ í•˜ê¸°ë¥¼ í†µí•´ì„œ ìƒë‹´ê°€ë¥¼ í‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## ì¹­ì°¬í•˜ê¸°
![ê³ ë¯¼ìƒë‹´_ì¹­ì°¬í•˜ê¸°](./screenshot/ê³ ë¯¼ìƒë‹´_ì¹­ì°¬í•˜ê¸°.PNG)
- ìƒë‹´ìëŠ” ê³ ë¯¼ìƒë‹´ì´ ì¢…ë£Œëœ í›„ ìƒë‹´ê°€ì— ëŒ€í•œ ë¦¬ë·°ë¡œ ì ìˆ˜ì™€ ì‚¬ìœ ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìƒë‹´ê°€ëŠ” ì¹­ì°¬í•˜ê¸°ì—ì„œ ë°›ì€ ì ìˆ˜ë¡œ ë­í‚¹ì„ ìˆœìœ„ë¥¼ ë‹¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

<br/>

## ì‹ ê³ í•˜ê¸°
![ê³ ë¯¼ìƒë‹´_ì‹ ê³ í•˜ê¸°](./screenshot/ê³ ë¯¼ìƒë‹´_ì‹ ê³ í•˜ê¸°.PNG)
- ìƒë‹´ìëŠ” ê³ ë¯¼ìƒë‹´ì´ ì¢…ë£Œëœ í›„ ìƒë‹´ê°„ì˜ ìƒë‹´ìì™€ì˜ ë¬¸ì œì‚¬í•­ì— ëŒ€í•´ ì‹ ê³  ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ë‹¤ìˆ˜ì˜ ì‹ ê³ ë¥¼ ë°›ì€ ìƒë‹´ê°€ëŠ” ì„œë¹„ìŠ¤ ì´ìš©ì— ëŒ€í•œ ì œì¬ ì¡°ì¹˜ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.


<br/><br/><br/>

# ë°œìì·¨

### ëŠ˜ë¹„ìƒë‹´ì€ ì‚¬ìš©ìì˜ í¸ì˜ë¥¼ ìœ„í•´ ë°œìì·¨ğŸ‘£ë¥¼ ë‚¨ê²¨ë‘¡ë‹ˆë‹¤.

![ë°œìì·¨1](screenshot/ë°œìì·¨1.png)

### 1. ê³ í•´ì„±ì‚¬ ê¸°ë¡

- ì°¸ì—¬í•œ ê³ í•´ì„±ì‚¬ ë‚´ì—­ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê³ í•´ì„±ì‚¬ ë°©ì„ ìƒì„±í•œ ë°©ì¥, ì£¼ì œ, í•œì¤„ ì†Œê°œ, ì´ ì°¸ê°€ììˆ˜ ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ê¸°ê°„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•´ ê°€ë…ì„±ì„ ë†’ì˜€ê³ , í•œ í˜ì´ì§€ë‹¹ 3ê°œì˜ ê³ í•´ì„±ì‚¬ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ì•„ì§ í™œë™í•œ ê³ í•´ì„±ì‚¬ ë‚´ì—­ì´ ì—†ì„ ê²½ìš° "ì•„ì§ ê³ í•´ì„±ì‚¬ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

<br/><br/>

![ë°œìì·¨2](screenshot/ë°œìì·¨2.png)

### 2. ê³ ë¯¼ìƒë‹´ ê¸°ë¡

- ì°¸ì—¬í•œ ê³ ë¯¼ìƒë‹´ ë‚´ì—­ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìƒë‹´ê°€ ì •ë³´ì™€ ì£¼ì œ ê·¸ë¦¬ê³  ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ê¸°ê°„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•´ ê°€ë…ì„±ì„ ë†’ì˜€ê³ , í•œ í˜ì´ì§€ë‹¹ 3ê°œì˜ ê³ ë¯¼ìƒë‹´ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ì•„ì§ í™œë™í•œ ê³ ë¯¼ìƒë‹´ ë‚´ì—­ì´ ì—†ì„ ê²½ìš° "ì•„ì§ ê³ ë¯¼ìƒë‹´ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

<br/><br/>

![ë°œìì·¨3](screenshot/ë°œìì·¨3.png)

### 3. ê²Œì‹œíŒ í™œë™

- ì‘ì„±í•œ ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‘ì„±í•œ ê²Œì‹œê¸€ì˜ ê²½ìš° ê³µê°ìˆ˜, ëŒ“ê¸€ìˆ˜, ì¡°íšŒìˆ˜ë¥¼ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì›í•˜ëŠ” ê²Œì‹œê¸€ì´ë‚˜ ëŒ“ê¸€ì˜ "**View This Community**"ë¥¼ í´ë¦­ì‹œ ì‘ì„±í•œ ê²Œì‹œê¸€ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
- í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•´ ê°€ë…ì„±ì„ ë†’ì˜€ê³ , ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ ëª¨ë‘ í•œ í˜ì´ì§€ë‹¹ 3ê°œì˜ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ì•„ì§ í™œë™í•œ ê²Œì‹œê¸€ì´ë‚˜ ëŒ“ê¸€ ë‚´ì—­ì´ ì—†ì„ ê²½ìš° "ì•„ì§ ì‘ì„±í•œ ê²Œì‹œê¸€orëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

<br/><br/>

![ë°œìì·¨4](screenshot/ë°œìì·¨4.png)

### 4. ë¦¬ë·° í™œë™

#### ëŠ˜ë¹„ìƒë‹´ì˜ ê³ ë¯¼ìƒë‹´ ì„œë¹„ìŠ¤ ì´ìš© ì§í›„ **ì¹­ì°¬í•˜ê¸°**ì„ í†µí•´ í¬ì¸íŠ¸ì™€ í•œì¤„í‰ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ë‚´ê°€ ë°›ì€ ë¦¬ë·°
  - ì‚¬ìš©ìê°€ ìƒë‹´ê°€ë¡œì„œ í™œë™í–ˆì„ ë•Œ ìƒë‹´ìë¡œë¶€í„° ë°›ì€ ë¦¬ë·° ì •ë³´ì…ë‹ˆë‹¤.
  - ìƒë‹´ìì˜ ë‹‰ë„¤ì„, 10ì  ë§Œì ì˜ í¬ì¸íŠ¸ ì •ë³´, í•œì¤„í‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•´ ê°€ë…ì„±ì„ ë†’ì˜€ê³ , í•œ í˜ì´ì§€ë‹¹ 3ê°œì˜ ë‚´ê°€ ë°›ì€ ë¦¬ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì‚¬ìš©ìê°€ ì•„ì§ ë¦¬ë·°ë¥¼ ë°›ì§€ ëª»í–ˆì„ ê²½ìš° "ì•„ì§ ë°›ì€ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
- ë‚´ê°€ ì ì€ ë¦¬ë·°
  - ì‚¬ìš©ìê°€ ìƒë‹´ìë¡œì„œ í™œë™í–ˆì„ ë•Œ ìƒë‹´ê°€ì—ê²Œ ì‘ì„±í•œ ë¦¬ë·° ì •ë³´ì…ë‹ˆë‹¤.
  - ìƒë‹´ê°€ì˜ ë‹‰ë„¤ì„, 10ì  ë§Œì ì˜ í¬ì¸íŠ¸ ì •ë³´, í•œì¤„í‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ê³ ë¯¼ìƒë‹´ ì„œë¹„ìŠ¤ ì§í›„ ì§ì ‘ ì‘ì„±í•œ í¬ì¸íŠ¸ ì •ë³´ì™€ í•œì¤„í‰ì„ ë°”íƒ•ìœ¼ë¡œ ìƒë‹´ê°€ ì„ íƒì— ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•´ ê°€ë…ì„±ì„ ë†’ì˜€ê³ , í•œ í˜ì´ì§€ë‹¹ 3ê°œì˜ ë‚´ê°€ ì ì€ ë¦¬ë·°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ì‚¬ìš©ìê°€ ì•„ì§ ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì„ ê²½ìš° "ì•„ì§ ì‘ì„±í•œ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤"ë¼ëŠ” ë¬¸êµ¬ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.


<br/><br/><br/>

# ê²Œì‹œíŒ

## ê²Œì‹œíŒ ë©”ì¸í™”ë©´
![ê²Œì‹œíŒ_ë©”ì¸](./screenshot/ê²Œì‹œíŒ_ë©”ì¸.PNG)

### ê²Œì‹œê¸€ ë³´ê¸°
- ìš°ì¸¡ ìƒë‹¨ì˜ ê²Œì‹œíŒì„ ëˆŒëŸ¬ ê²Œì‹œíŒìœ¼ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê²Œì‹œíŒ í™”ë©´ìœ¼ë¡œ ë“¤ì–´ì˜¤ë©´ ê²Œì‹œê¸€ ëª©ë¡ì´ ë³´ì´ê³  ê²Œì‹œê¸€ ì¤‘ ë³´ê³  ì‹¶ì€ ê²Œì‹œê¸€ì„ í´ë¦­í•©ë‹ˆë‹¤.
- í•´ë‹¹ ê²Œì‹œê¸€ì˜ ìƒì„¸ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í˜ì´ì§€ë„¤ì´ì…˜
- í•œí˜ì´ì§€ë§ˆë‹¤ 8ê°œì˜ ê²Œì‹œê¸€ë“¤ì´ ë³´ì´ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.
- ë‹¤ë¥¸ ê¸€ë“¤ì„ ë³´ê¸° ìœ„í•´ì„œëŠ” í•˜ë‹¨ì˜ ìˆ«ì ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹¤ìŒ í˜ì´ì§€ë¡œ ë„˜ì–´ ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## ê²Œì‹œíŒ ìƒë‹¨ ë©”ë‰´
![ê²Œì‹œíŒ_ìƒë‹¨ë°”](./screenshot/ê²Œì‹œíŒ_ìƒë‹¨ë°”.PNG)

### ê²€ìƒ‰
- ê²Œì‹œê¸€ ëª©ë¡ ìš°ì¸¡ ìƒë‹¨ì— ê²Œì‹œê¸€ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ì°½ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
- ì„ íƒì„ ëˆŒëŸ¬ ë‚´ìš©, ì œëª©, ë‹‰ë„¤ì„ìœ¼ë¡œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ê²€ìƒ‰í•˜ê³  ì‹¶ì€ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  ì°¾ê¸°ë¥¼ ëˆ„ë¥´ë©´ í•´ë‹¹í•˜ëŠ” ê²Œì‹œê¸€ ëª©ë¡ì„ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.

<br/>

### ì •ë ¬

- ê²Œì‹œê¸€ ëª©ë¡ ì¢Œì¸¡ ìƒë‹¨ì„ ë³´ë©´ ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ì •ë ¬ í•  ìˆ˜ ìˆëŠ” ëª©ë¡ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê²Œì‹œê¸€ ëª©ë¡ìœ¼ë¡œ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìµœì‹ ìˆœ ì •ë ¬ì´ ë˜ë©° ì›í•œë‹¤ë©´ ê³µê°ì„ ë§ì´ ë°›ì€ ê²Œì‹œê¸€, ë˜ëŠ” ì¡°íšŒìˆœìœ¼ë¡œ ê²Œì‹œê¸€ì„ ì •ë ¬í•´ì„œ ë³´ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ì•„ë˜ì™€ ê°™ì´ ì¡°íšŒìˆœì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ì¡°íšŒìˆ˜ê°€ ê°€ì¥ ë†’ì€ ê¸€ì´ ì œì¼ ì•ìœ¼ë¡œ ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

### ê³µê°ìˆ˜ / ëŒ“ê¸€ìˆ˜ / ì¡°íšŒìˆ˜
- ê²Œì‹œê¸€ ëª©ë¡ ìš°ì¸¡ ìƒë‹¨ì—ëŠ” í•´ë‹¹ ê²Œì‹œê¸€ì— ê³µê°í•œ íšŸìˆ˜, ë‹¬ë¦° ëŒ“ê¸€ ìˆ˜, ì¡°íšŒìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
![ê²Œì‹œíŒ_ìƒì„¸](./screenshot/ê²Œì‹œíŒ_ìƒì„¸.PNG)


![ê²Œì‹œíŒ_ìƒì„¸2](./screenshot/ê²Œì‹œíŒ_ìƒì„¸2.PNG)

### ìƒì„¸ê¸€
- ê²Œì‹œê¸€ ì¤‘ ë³´ê³  ì‹¶ì€ ê²Œì‹œê¸€ì„ í´ë¦­í•˜ì—¬ ë“¤ì–´ì˜¤ë©´ ìœ„ì™€ ê°™ì€ í˜ì´ì§€ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
- ê²Œì‹œê¸€ì˜ ì œëª©, ì‘ì„±ì, ì‘ì„±ë‚ ì§œ, ì¡°íšŒìˆ˜, ê³µê°ìˆ˜, ê²Œì‹œê¸€ ë‚´ìš© ë“± ìƒì„¸í•œ ë‚´ìš©ì´ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤.
- ê·¸ë¦¬ê³  ì•„ë˜ì— ê³µê°í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì´ ì¡´ì¬í•˜ë©°, ê²Œì‹œê¸€ì— ë¬¸ì œê°€ ìˆë‹¤ê³  íŒë‹¨ë  ì‹œ ì‹ ê³ ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ëŒ“ê¸€
- ê²Œì‹œê¸€ì„ ì•„ë˜ìª½ì—ëŠ” í•´ë‹¹ ê²Œì‹œê¸€ì— ì‚¬ìš©ìë“¤ì´ ë‚¨ê¸´ ëŒ“ê¸€ë“¤ì´ ì¡´ì¬í•˜ë©°, ìì‹ ë„ ëŒ“ê¸€ì„ ë‹¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ê²Œì‹œê¸€ì— ëŒ€í•œ ëŒ“ê¸€ì„ ì‘ì„±í•˜ê³  ìš°ì¸¡ì˜ ì‘ì„± ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ëŒ“ê¸€ì´ ë‹¬ë¦¬ê²Œ ë©ë‹ˆë‹¤.
  

<br/>

### ëŒ€ëŒ“ê¸€
- ëŒ€ëŒ“ê¸€, ì¦‰ ëŒ“ê¸€ì˜ ëŒ“ê¸€ì„ ë³´ê³  ì‹¶ì„ ê²½ìš° ëŒ“ê¸€ ë³´ê¸°ë¥¼ í´ë¦­í•˜ë©´ ëŒ€ëŒ“ê¸€ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë˜í•œ, ëŒ€ëŒ“ê¸€ì„ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ì°½ë„ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤.
- ëŒ“ê¸€ ì‘ì„±ë²•ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë‚´ìš©ì„ ì‘ì„±í•˜ê³  ì‘ì„± ë²„í„´ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ëŒ€ëŒ“ê¸€ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¬ë¦¬ê²Œ ë©ë‹ˆë‹¤.
- ì‘ì„± ì˜†ì˜ ë‹«ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ëŒ€ëŒ“ê¸€ ì°½ì´ ë‹«íˆê²Œ ë©ë‹ˆë‹¤.

<br/><br/><br/>

# ê³µì§€ì‚¬í•­

## ê³µì§€ì‚¬í•­ ë©”ì¸í™”ë©´
![ê³µì§€ì‚¬í•­_ë©”ì¸](./screenshot/ê³µì§€ì‚¬í•­_ë©”ì¸.PNG)
- ìƒë‹¨ì˜ ë©”ë‰´ì—ì„œ ê³µì§€ì‚¬í•­ ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ ê³µì§€ì‚¬í•­ ë©”ì¸í™”ë©´ìœ¼ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ ê³³ì€ ëŠ˜ë¹„ìƒë‹´ ì‚¬ì´íŠ¸ ì´ìš© ìˆ˜ì¹™, ê³µì§€ì‚¬í•­, ì´ë²¤íŠ¸ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³µê°„ì…ë‹ˆë‹¤.
- ì‚¬ìš©ìë“¤ì€ ê³µì§€ì‚¬í•­ì„ í™•ì¸ë§Œ í•  ìˆ˜ ìˆìœ¼ë©°, ê³µì§€ì‚¬í•­ì„ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- ì‚¬ì´íŠ¸ ìš´ì˜ìë§Œ ê³µì§€ì‚¬í•­ì„ ì‘ì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>


## ê³µì§€ì‚¬í•­ ìƒì„¸ë³´ê¸°
![ê³µì§€ì‚¬í•­_ìƒì„¸](./screenshot/ê³µì§€ì‚¬í•­_ìƒì„¸.PNG)
- ê³µì§€ì‚¬í•­ ì¤‘ ë³´ê³  ì‹¶ì€ ê³µì§€ì‚¬í•­ì„ í´ë¦­í•˜ì—¬ ë“¤ì–´ì˜¤ë©´ ìœ„ì™€ ê°™ì€ í˜ì´ì§€ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
- ê³µì§€ì‚¬í•­ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ë ¤ë©´ ìš°ì¸¡ í•˜ë‹¨ì˜ ëª©ë¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‚¬ì´íŠ¸ ìš´ì˜ìë§Œ ê³µì§€ì‚¬í•­ ìˆ˜ì •, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/><br/>

# Q&A

## Q&A ë©”ì¸í™”ë©´
![QnA_ë©”ì¸](./screenshot/QnA_ë©”ì¸.PNG)
- ìƒë‹¨ì˜ ë©”ë‰´ì—ì„œ Q&A ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ Q&A ë©”ì¸í™”ë©´ìœ¼ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ ê³³ì€ ëŠ˜ë¹„ìƒë‹´ ì‚¬ì´íŠ¸ ì´ìš©í•˜ë©° ê¶ê¸ˆí•œ ì‚¬í•­ë“¤ì„ ìš´ì˜ìì—ê²Œ ì§ˆë¬¸ì„ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ê³µê°„ì…ë‹ˆë‹¤.
- ì‚¬ìš©ìë“¤ì€ ììœ ë¡­ê²Œ Q&Aë¥¼ ë‚¨ê²¨ ì›í•˜ëŠ” ì§ˆë¬¸ì„ í•  ìˆ˜ ìˆê³  ë‹µë³€ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## Q&A ì‘ì„±
![QnA_ì‘ì„±](./screenshot/QnA_ì‘ì„±.PNG)
- Q&A ì‘ì„±ì‹œ ê³µê°œ / ë¹„ê³µê°œë¥¼ ì„ íƒí•˜ì—¬ ì§ˆë¬¸ì„ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë¹„ê³µê°œë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì œëª©ê³¼ ê²Œì‹œê¸€ì„ ì‘ì„±í•œ ë’¤ ë“±ë¡ì„ ëˆ„ë¥´ê²Œ ë˜ë©´ Q&Aë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## Q&A ë‹µê¸€
![QnA_ë‹µê¸€](./screenshot/QnA_ë‹µê¸€.PNG)
- ë‹µë³€ ì‘ì„±ì€ ìš´ì˜ìë§Œ ê°€ëŠ¥í•˜ë©°, í™”ë©´ê³¼ ê°™ì´ ë‹µê¸€ ê´€ë¦¬ë¼ëŠ” ë²„íŠ¼ì´ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤.
- ìì‹ ì´ ì‘ì„±ìë¼ë©´ ë§ˆì°¬ê°€ì§€ë¡œ ë‹µê¸€ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## Q&A ìƒì„¸ë³´ê¸°
![QnA_ìƒì„¸](./screenshot/QnA_ìƒì„¸.PNG)
- ìì‹ ì´ ì‘ì„±ìì´ê±°ë‚˜ ê³µê°œëœ Q&Aë¼ë©´ ì ê¸ˆ í•´ì œ ì•„ì´ì½˜ì´ í‘œì‹œë©ë‹ˆë‹¤.
- ë‹µê¸€ì´ ì‘ì„±ì´ ëœ Q&Aë¼ë©´ í´ë¦­í•˜ì—¬ ë‹µê¸€ì„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/><br/>

# ë¹Œë“œ ë° ë°°í¬ì— í•„ìš”í•œ ì •ë³´
<br>

# 1. ì£¼ìš” ë²„ì „
1. JVM : 1.8.0.312
2. Web Server : Nginx 1.18.0
3. WAS : Tomcat 9.0.45
4. Visual Studio : 1.64.2
5. IntelliJ : IntelliJ IDEA 2021.3.2 (community)
6. Vue : 3.0.0
7. NodeJS : v16.13.1
8. springBootVer = '2.4.5'
9. ìƒì„¸ ë²„ì „ ì •ë³´
   - FrontEnd : pakage.json
   - SpringBoot : build.gradle

<br/><br/>

# 2. í™˜ê²½ ë³€ìˆ˜

## 1. front-end/Dockerfile

```bash
FROM node:16 as build-stage
WORKDIR /app
ADD . .
RUN npm install
RUN npm run build

FROM nginx:stable-alpine as production-stage
COPY  ./nginx.conf /etc/nginx/conf.d/default.conf

COPY --from=build-stage /app/dist /usr/share/nginx/html
CMD ["nginx", "-g", "daemon off;"]

```

<br>

## 2. nginx.conf

```bash
# frontend/nginx/nginx.conf

server {
  listen 9999;
  listen [::]:9999;
	
	# server_name ë„ë©”ì¸;
  server_name {server_name};

  access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

  location / {
    alias /usr/share/nginx/html;
    try_files $uri $uri/ /index.html;
    return 301 https://$server_name$request_uri; # http ì ‘ì† ì‹œ https ë¡œ ìë™ ì ‘ì†
  }
}

server {
	listen 443 ssl;
	listen [::]:443 ssl;
	 
	# server_name ë„ë©”ì¸;
	server_name {server_name};

	ssl_certificate /var/www/html/fullchain.pem;
	ssl_certificate_key /var/www/html/privkey.pem;

	root /usr/share/nginx/html;
	index index.html;

	location / {
		try_files $uri $uri/ /index.html;
	}
}
```

<br>

## 3. OpenVidu
```bash
# OpenVidu configuration
# ----------------------
# Documentation: https://docs.openvidu.io/en/stable/reference-docs/openvidu-config/

# NOTE: This file doesn't need to quote assignment values, like most shells do.
# All values are stored as-is, even if they contain spaces, so don't quote them.

# Domain name. If you do not have one, the public IP of the machine.
# For example: 198.51.100.1, or openvidu.example.com
DOMAIN_OR_PUBLIC_IP=localhost

# OpenVidu SECRET used for apps to connect to OpenVidu server and users to access to OpenVidu Dashboard
OPENVIDU_SECRET=MY_SECRET

# Certificate type:
# - selfsigned:  Self signed certificate. Not recommended for production use.
#                Users will see an ERROR when connected to web page.
# - owncert:     Valid certificate purchased in a Internet services company.
#                Please put the certificates files inside folder ./owncert
#                with names certificate.key and certificate.cert
# - letsencrypt: Generate a new certificate using letsencrypt. Please set the
#                required contact email for Let's Encrypt in LETSENCRYPT_EMAIL
#                variable.
CERTIFICATE_TYPE=letsencrypt

# If CERTIFICATE_TYPE=letsencrypt, you need to configure a valid email for notifications
LETSENCRYPT_EMAIL={email}

# Proxy configuration
# If you want to change the ports on which openvidu listens, uncomment the following lines

# Allows any request to http://DOMAIN_OR_PUBLIC_IP:HTTP_PORT/ to be automatically
# redirected to https://DOMAIN_OR_PUBLIC_IP:HTTPS_PORT/.
# WARNING: the default port 80 cannot be changed during the first boot
# if you have chosen to deploy with the option CERTIFICATE_TYPE=letsencrypt
HTTP_PORT=80

# Changes the port of all services exposed by OpenVidu.
# SDKs, REST clients and browsers will have to connect to this port
HTTPS_PORT=9000
```

<br>

## 4. Spring application.properties
```properties
# application-prod.properties
# SSL ??

server.port=8080
server.ssl.enabled=true
server.ssl.key-store-type=PKCS12
server.ssl.key-store=/root/key.p12
server.ssl.key-store-password="ë¹„ë°€ë²ˆí˜¸"


#it will be set build date by gradle. if this value is @build.date@, front-end is development mode
build.date=@build.date@
server.servlet.contextPath=/
# Charset of HTTP requests and responses. Added to the "Content-Type" header if not set explicitly.
server.servlet.encoding.charset=UTF-8
# Enable http encoding support.
server.servlet.encoding.enabled=true
# Force the encoding to the configured charset on HTTP requests and responses.
server.servlet.encoding.force=true

# for SPA
spring.resources.static-locations=classpath:/dist/
spa.default-file=/dist/index.html
spring.mvc.throw-exception-if-no-handler-found=true
spring.resources.add-mappings=false

# Swagger
springfox.documentation.swagger.use-model-v3=false

#database
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
spring.jpa.hibernate.naming.physical-strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL57Dialect
spring.data.web.pageable.one-indexed-parameters=true
spring.datasource.url="Database URL"
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.username="Database ID"
spring.datasource.hikari.password="Database Password"

# jwt
jwt.secret="jwt secret key"
# unit is ms. 15 * 24 * 60 * 60 * 1000 = 15days
jwt.expiration="jwt ë§Œë£Œì‹œê°„"

#logging
logging.file.name=./ssafy-web.log
logging.level.root=INFO
logging.level.com.samsung.security=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.apache.tiles=INFO
logging.level.org.sringframework.boot=DEBUG
logging.level.org.sringframework.security=DEBUG
spring.jpa.properties.hibernate.show_sql=true

spring.devtools.livereload.enabled=true

#gzip compression
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css

#for health check
management.servlet.context-path=/manage
management.health.db.enabled=true
management.health.default.enabled=true
management.health.diskspace.enabled=true

#Google Email
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username="Email ID"
spring.mail.password="Email password"
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.auth=true

#Social Login
spring.security.oauth2.client.registration.google.client-id="google social client id"
spring.security.oauth2.client.registration.google.client-secret="google social secret key"
spring.security.oauth2.client.registration.google.scope=profile,email
spring.profiles.include=oauth

spring.security.oauth2.client.registration.naver.client-id="Naver Client Id"
spring.security.oauth2.client.registration.naver.client-secret="Naver Client Secret Key"
spring.security.oauth2.client.registration.naver.client-authentication-method=post
spring.security.oauth2.client.registration.naver.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.naver.redirect-uri={baseUrl}/{action}/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.naver.scope=nickname, email, profile_image
spring.security.oauth2.client.registration.naver.client-name=Naver

spring.security.oauth2.client.provider.naver.authorization-uri=https://nid.naver.com/oauth2.0/authorize
spring.security.oauth2.client.provider.naver.token-uri=https://nid.naver.com/oauth2.0/token
spring.security.oauth2.client.provider.naver.user-info-uri=https://openapi.naver.com/v1/nid/me
spring.security.oauth2.client.provider.naver.user-name-attribute=response

spring.security.oauth2.client.registration.kakao.client-id="Kakao client Id"
spring.security.oauth2.client.registration.kakao.client-secret="Kakao Client Secret Key"
spring.security.oauth2.client.registration.kakao.client-authentication-method=post
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.redirect-uri={baseUrl}/{action}/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.kakao.scope=profile_nickname, profile_image, account_email
spring.security.oauth2.client.registration.kakao.client-name=Kakao

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

# app.oauth2.authorizedRedirectUris=http://localhost:3000/oauth/redirect

spring.servlet.multipart.file-size-threshold=1MB
spring.servlet.multipart.location=C:/Temp
spring.servlet.multipart.max-file-size=30MB
spring.servlet.multipart.max-request-size=30MB


#AWS S3 Cloud key
cloud.aws.credentials.accessKey="AWS S3 accessKey"
cloud.aws.credentials.secretKey="AWS S3 secretKey"
cloud.aws.stack.auto=false

# AWS S3 Service bucket
cloud.aws.s3.bucket="Bucket Name"
cloud.aws.region.static=ap-northeast-2

# AWS S3 Bucket URL
cloud.aws.s3.bucket.url="Bucket url"
```

<br><br><br>

# 3. ë°°í¬ ì‹œ íŠ¹ì´ ì‚¬í•­

### ì˜¤ë¥˜ ì›ì¸: coturn ì„œë²„ ë¬¸ì œ
- OpenVidu ì„œë²„ http í¬íŠ¸ë¥¼ ë³€ê²½í•´ë„ ì ìš©ë˜ì§€ ì•Šê³ , 80ë²ˆ í¬íŠ¸ë¥¼ ì°¨ì§€í•¨. 

<br/><br/>

### í•´ê²° ë°©ë²•: http í¬íŠ¸ ë³€ê²½ì„ í†µí•œ í•´ê²°
- í¬íŠ¸ ì´ìŠˆ í•´ê²°ì„ ìœ„í•´ ê¸°ì¡´ í”„ë¡ íŠ¸ì—”ë“œê°€ ê°€ì§€ê³  ìˆë˜ http í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì—¬ í•´ê²°í•¨.

<br/><br/>

### í˜„ì¬ : í˜„ì¬ íŠ¹ì´ì‚¬í•­ ì—†ìŒ

<br/><br/><br>

# 4. ì£¼ìš” ê³„ì • ë° í”„ë¡œí¼í‹°
## application.properties
- localì—ì„œ ì‚¬ìš©í•˜ëŠ” ì •ë³´ë“¤
  - ì—°ë™ëœ database(mysql) ì—°ê²° ê³„ì • ì •ë³´
  - Google Email ì„œë¹„ìŠ¤ ê³„ì • ì •ë³´
  - ì†Œì…œë¡œê·¸ì¸ ì—°ê²° í´ë¼ì´ì–¸íŠ¸ ID, Secret ì •ë³´
    - êµ¬ê¸€
    - ë„¤ì´ë²„
    - ì¹´ì¹´ì˜¤
  - AWS S3
    - accessKey
    - secretKey
    - bucket
  

<br/>

## application-prod.properties 
- application.properties ì •ë³´ë¥¼ í¬í•¨í•œ ssl ì •ë³´ ë“± BackEnd AWS EC2 ë°°í¬ì‹œ í•„ìš”í•œ ì¶”ê°€ì •ë³´ë“¤ ì €ì¥

<br><br><br>

# 5. ERD
![](screenshot/ERD.PNG)

<br><br><br>

# ë°°í¬ ë° ì£¼ìš” ê¸°ìˆ  ì„¤ëª…

<br>

# ë°°í¬ 

## EC2 ubuntu ì„œë²„ë¥¼ ì´ìš©í•˜ì—¬ ë°°í¬
<br/>

---

## Docker ì„¤ì¹˜
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ ì†í•˜ê²Œ êµ¬ì¶•, í…ŒìŠ¤íŠ¸ ë° ë°°í¬í•  ìˆ˜ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ í”Œë«í¼

<br/>

### 1. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common
```

<br/>

### 2. GPG Key ì¸ì¦
```bash
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
```

<br/>

### 3. docker repository ë“±ë¡
```bash
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
```

<br/>

### 4. docker ì„¤ì¹˜
```bash
sudo apt-get update && sudo apt-get install docker-ce docker-ce-cli containerd.io
```

<br>             

## jenkins
- CI/CD íˆ´
- ì§€ì†ì  í†µí•© ì§€ì†ì  ë°°í¬

<br/>

### 1. run ëª…ë ¹ì–´
```bash
  sudo docker run -d --name jenkins -u root --privileged \
  
  -p '9090:8080' \
  
  -v '/home/ubuntu/docker-volume/jenkins:/var/jenkins_home' \
  
  -v '/var/run/docker.sock:/var/run/docker.sock' \
  
  -v '/usr/bin/docker:/usr/bin/docker' \
  
  jenkins/jenkins 
```

<br/>

### 2. Docker ì‚¬ìš© í™•ì¸
```bash
  sudo docker exec -it jenkins bash
  
  docker -v
```

<br/>

### 3. Jenkins ì»¨í…Œì´ë„ˆ ë‚´ë¶€ docker-compose ì„¤ì¹˜
```bash
  docker exec -it jenkins bash

  curl -L "https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
  
  chmod +x /usr/local/bin/docker-compose
  
  docker-compose -v
```

<br/>

### 4. Jenkins í™˜ê²½ ì„¤ì •
```bash
  {Jenkins url} ì ‘ì†
  
  sudo docker logs jenkins ëª…ë ¹ì–´ ì…ë ¥ -> root ê³„ì • ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í›„ ì…ë ¥
  
  Install suggested plugins ì„ íƒ
  
  ê³„ì • ìƒì„±
```

<br/><br/>


## SSL ì¸ì¦ì„œ ë°œê¸‰

<br/>

### 1. letsencrypt ì„¤ì¹˜í•˜ê¸°
```bash
  sudo apt-get update 
  sudo apt-get install letsencrypt
```

<br/>

### 2.  ì¸ì¦ì„œ ë°œê¸‰ 
```bash
  sudo letsencrypt certonly --standalone -d {Jenkins url}
```

<br/>  

### 3. ë¹„ë°€ë²ˆí˜¸, ì´ë©”ì¼ ì…ë ¥ ë° ì•ˆë‚´ ì‚¬í•­ì— ë™ì˜ í›„ ì§„í–‰  

<br/>

### 4. root ê³„ì • ë¡œê·¸ì¸ 
```bash
  sudo su
```

<br/>

### 5. ì¸ì¦ì„œ ìœ„ì¹˜ í´ë” ì´ë™ 
```bash
cd /etc/letsencrypt/live/ë„ë©”ì¸
```
- pemì„ PKCS12 í˜•ì‹ìœ¼ë¡œ ë³€ê²½ 
```
  openssl pkcs12 -export -in fullchain.pem -inkey privkey.pem -out key.p12 -name airpageserver -CAfile chain.pem -caname root 
```

<br/>

### 6. ì¸ì¦ì„œ ë³µì‚¬ 

<br/>

### 7. ì¸ì¦ì„œ ë³´ê´€ í´ë”ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ ì£¼ì„¸ìš” 
 ```bash
  sudo cp [íŒŒì¼ì´ë¦„] [ì¸ì¦ì„œë¥¼ ë³´ê´€ í•  docker volume í´ë”]

  ì˜ˆì‹œ) 
  sudo cp fullchain.pem /home/ubuntu/docker-volume/ssl 

  sudo cp privkey.pem /home/ubuntu/docker-volume/ssl  

  sudo cp key.p12 /home/ubuntu/docker-volume/ssl
 ```

<br><br>

## í”„ë¡ íŠ¸ì—”ë“œ
- nginx : ë°°í¬ìš© ê²½ëŸ‰ ì›¹ì„œë²„
- DockerFile ì‘ì„±
  
```bash
  FROM node:14 as build-stage
  WORKDIR /app
  ADD . .
  RUN npm install
  RUN npm run build

  FROM nginx:stable-alpine as production-stage
  COPY  ./nginx/nginx.conf /etc/nginx/conf.d/default.conf

  COPY --from=build-stage /app/dist /usr/share/nginx/html
  CMD ["nginx", "-g", "daemon off;"]
```


- nginx ì„¤ì • íŒŒì¼ ì‘ì„±

```bash
  # 80 portë¥¼ openviduì—ì„œ ì“°ê¸° ë•Œë¬¸ì— 9999 port ì‚¬ìš©
  server {
  listen 9999;
  listen [::]:9999;
      
      # server_name ë„ë©”ì¸;
  server_name {server_name};

  access_log /var/log/nginx/access.log;
      error_log /var/log/nginx/error.log;

  location / {
      alias /usr/share/nginx/html;
      try_files $uri $uri/ /index.html;
      return 301 https://$server_name$request_uri; # http ì ‘ì† ì‹œ https ë¡œ ìë™ ì ‘ì†
  }
  }

  server {
      listen 443 ssl;
      listen [::]:443 ssl;
      
      # server_name ë„ë©”ì¸;
      server_name {server_name};

      ssl_certificate /var/www/html/fullchain.pem;
      ssl_certificate_key /var/www/html/privkey.pem;

      root /usr/share/nginx/html;
      index index.html;

      location / {
          try_files $uri $uri/ /index.html;
      }
  }
```

<br/><br/>

## ë°±ì—”ë“œ

<br/>

### ë°°í¬ìš© application.properties ì‘ì„±
1. ë°°í¬ìš© ì„¤ì •ì„ ì…ë ¥í•˜ê¸° ìœ„í•œ application-prod.properties ìƒì„±
2. ê¸°ì¡´ ì„¤ì • + SSL ì„¤ì • ì‘ì„±
```bash
  # application-prod.properties
  # SSL ì„¤ì •

  server.port=8080
  server.ssl.enabled=true
  server.ssl.key-store-type=PKCS12
  server.ssl.key-store=/root/key.p12
  server.ssl.key-store-password=#ì¸ì¦ì„œ ë¹„ë°€ë²ˆí˜¸
```

<br/>

### Dockerfile ì‘ì„±
```
  # backend/Dockerfile
  # ì‚¬ìš©í•œ openjdk ë²„ì „ì— ë§ëŠ” ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
  FROM openjdk:8-jdk-alpine

  # jar íŒŒì¼ ê²½ë¡œëŠ” ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.
  COPY build/libs/backend-0.0.1-SNAPSHOT.jar app.jar

  # ë°°í¬ìš© properties ì‹¤í–‰ ëª…ë ¹ì–´
  ENTRYPOINT ["java","-jar","app.jar","--spring.config.name=application-prod"] 
```

<br><br>


## í†µí•© docker-compose
```bash
  # í”„ë¡œì íŠ¸ Root í´ë”
  version: '3.2'

  services: 
  frontend:
      image: frontend-vue
      build:
      context: frontend/
      dockerfile: Dockerfile
      ports:
      - "9999:9999"
      - "443:443" 
      # [ì¸ì¦ì„œ íŒŒì¼ ì €ì¥ ê²½ë¡œ]:/var/www/html
      volumes:
      - /home/ubuntu/docker-volume/ssl:/var/www/html
      container_name: "front-end"
  
  backend:
      image: backend-spring
      build:
      context: backend/
      dockerfile: Dockerfile
      ports:
      - "8443:8443"  
          # [ì¸ì¦ì„œ íŒŒì¼ ì €ì¥ ê²½ë¡œ]:/root 
      volumes:
      - /home/ubuntu/docker-volume/ssl:/root
      container_name: "back-end"
```

<br/><br/>


## Jenkins Credential & Webhook & Pipeline

<br/>

### Credential
  1. Username / Password : Gitalb ê³„ì •
  2. ID : Credential ì‹ë³„ì
  3. Description : Credential ì„¤ëª…

<br/>

### Webhook
<br/>

1. GitLab í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
      ```
      Jenkins ê´€ë¦¬ â†’ í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ â†’ ì„¤ì¹˜ ê°€ëŠ¥ - GitLab ì„¤ì¹˜ ë° ì¬ì‹œì‘
      ```
      <br/>

2. Pipeline ìƒì„±
      ```
      ìƒˆë¡œìš´ Item â†’ Pipeline 
      ```
      <br/>        

3. Jenkins - GitLab Webhooks Secret token ìƒì„±
      ```
      êµ¬ì„± â†’ Build when a change is pushed to ...â†’ ê³ ê¸‰ ë²„íŠ¼â†’ Secret token 
      ```

<br/>

4. Gitlab - Webhooks ì„¤ì •
      ```
      Settings - Webhooks â†’ URL : #1 URLâ†’ Secret token : #2 Secret tokenâ†’ Add webhook â†’ Test - Push Events â†’ Hook executed successfully: HTTP 200í™•ì¸
      ```

<br/>

5. Push events ì—ì„œ Trigger ë¥¼ ë°œìƒì‹œí‚¬ branchë¡œ deploy branch ì„¤ì •

<br/>

6. Pipeline
      ```
      Definition - Pipeline script
      ```
      

<br/>

7. Script ì…ë ¥
      ```
      node {
            stage ('clone') {
                git branch: 'deploy', credentialsId: 'credential ì‹ë³„ì', url: 'Gitlab ì €ì¥ì†Œ Url'
            }
            stage ('gradle build') {
                        // íŒ€ í”„ë¡œì íŠ¸ ì„¤ì •(ë°±ì—”ë“œ í´ë” ì´ë¦„, ì‚¬ìš© ë°°í¬ ë„êµ¬(Gradle, Maven)ì— ë§ê²Œ ìˆ˜ì •
                dir('back-end'){
                    sh 'chmod +x gradlew'
                    sh './gradlew build'
                } 
            }
      
            stage ('docker build') {
                sh 'docker-compose down --rmi all' 
                        sh 'docker-compose up -d --build' 
                        sh 'docker rmi $(docker images -f "dangling=true" -q)'
            } 
        }
      ```

<br/><br/><br/>

# OAuth 2.0

## OAuth 2.0ë€?
- Open Authorization 2.0, OAuth2

- ì¸ì¦ì„ ìœ„í•œ ê°œë°©í˜• í‘œì¤€ í”„ë¡œí† ì½œ

- third-Party í”„ë¡œê·¸ë¨ì—ê²Œ ë¦¬ì†ŒìŠ¤ ì†Œìœ ìë¥¼ ëŒ€ì‹ í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ì„œë²„ì—ì„œ ì œê³µí•˜ëŠ” ìì›ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ ìœ„ì„í•˜ëŠ” ë°©ì‹ì„ ì œê³µ

- ê°„í¸ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ ì‚¬ìš©
    - êµ¬ê¸€, í˜ì´ìŠ¤ë¶, ì¹´ì¹´ì˜¤, ë„¤ì´ë²„ ë“±
    <br/><br/>


## **OAuth 2.0 ì£¼ìš” ìš©ì–´**

| ìš©ì–´ | ì„¤ëª… |
| --- | --- |
| Authentication | ì¸ì¦, ì ‘ê·¼ ìê²©ì´ ìˆëŠ”ì§€ ê²€ì¦í•˜ëŠ” ë‹¨ê³„ë¥¼ ë§í•©ë‹ˆë‹¤. |
| Authorization | ì¸ê°€, ìì›ì— ì ‘ê·¼í•  ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¸ê°€ê°€ ì™„ë£Œë˜ë©´ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê¶Œí•œì´ ë‹´ê¸´ Access Tokenì´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¶€ì—¬ë©ë‹ˆë‹¤ |
| Access Token | ë¦¬ì†ŒìŠ¤ ì„œë²„ì—ê²Œì„œ ë¦¬ì†ŒìŠ¤ ì†Œìœ ìì˜ ë³´í˜¸ëœ ìì›ì„ íšë“í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” Tokenì…ë‹ˆë‹¤. |
| Refresh Token | Access Token ë§Œë£Œì‹œ ì´ë¥¼ ê°±ì‹ í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©í•˜ëŠ” Tokenì…ë‹ˆë‹¤. Refresh Tokenì€ ì¼ë°˜ì ìœ¼ë¡œ Access Tokenë³´ë‹¤ ë§Œë£Œ ê¸°ê°„ì´ ê¹ë‹ˆë‹¤. |


<br/><br/>

## accessToken
![oauth0](screenshot/oauth0.png)
- ì•„ì´ë”” / ë¹„ë°€ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ì„œ ì•ˆì „
- ë‚˜ì˜ ì„œë¹„ìŠ¤ì—ì„œ ê¼­ í•„ìš”í•œ ê¸°ëŠ¥ ì¼ë¶€ë¶„ë§Œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì 

<br/><br/>    

## ì—­í•  êµ¬ë¶„
![oauth1](screenshot/oauth1.png)

### 1. **Resource Owner**
- ê³ ê°, ì‚¬ìš©ì

<br/>

### 2. **Client**
- ë‚˜ì˜ ì„œë¹„ìŠ¤

<br/>

### 3. **Resource Server**
- êµ¬ê¸€, í˜ì´ìŠ¤ë¶, ë„¤ì´ë²„ ë“± ê³ ê°ì˜ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ê³³

<br/>

### 4. **Authorization Server**
1. ì¸ì¦ ê´€ë ¨í•œ ì²˜ë¦¬ë¥¼  í•˜ëŠ” ì„œë²„
2. ê³µì‹ ë¬¸ì„œì—ëŠ” Resource / Authorization ë‘ ê°€ì§€ ì„œë²„ë¡œ ë‚˜ëˆ ì ¸ ìˆìŒ
3. ì—¬ê¸°ì„  ê°„ë‹¨í•œ ì„¤ëª…ì„ ìœ„í•´ Resource Serverë¡œ í•©ì³ì„œ ì„¤ëª…

<br/>

## Register

### 1. ì‚¬ì „ì— ìŠ¹ì¸ì„ ë°›ì•„ ë†“ì•„ì•¼ í•œë‹¤.

<br/>

### 2. ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ê° Resource Serverë§ˆë‹¤ ë‹¤ë¥´ì§€ë§Œ ê³µí†µì ì¸ ì„¸ê°€ì§€
1. Client ID
    1. ìš°ë¦¬ê°€ ë§Œë“¤ê³  ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•˜ëŠ” ì‹ë³„ì.
    2. ë…¸ì¶œë˜ì–´ë„ ìƒê´€ ì—†ë‹¤.

<br/>

2. Client Secret
    1. ë¹„ë°€ë²ˆí˜¸
    2. ì ˆëŒ€ë¡œ ì™¸ë¶€ì— ë…¸ì¶œë˜ë©´ ì•ˆëœë‹¤.

<br/>

3. Authorized redirect URLs
    1. Authorized : ê¶Œí•œì„ ë¶€ì—¬í•˜ë‹¤.
    2. Resource Serverê°€ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê³¼ì •ì—ì„œ Authorize Codeë¥¼ ì „ë‹¬í•´ì¤€ë‹¤.
    3. ê·¸ ë•Œ ì´ ì£¼ì†Œë¡œ ì „ë‹¬í•´ ë‹¬ë¼ê³  ì•Œë ¤ì¤€ ê²ƒ.
    4. Resource ServerëŠ” ë‹¤ë¥¸ ì£¼ì†Œì—ì„œ ìš”ì²­ì„ í•˜ë©´ ê±°ë¶€ë¥¼ í•  ê²ƒì´ë‹¤.

<br/>

4. ê° Resource Serverì— ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ìƒëµ
    1. êµ¬ê¸€ì—ì„œ ê²€ìƒ‰í•´ì„œ ì‚¬ìš©

<br/><br/>

## OAuth ì‘ë™ íë¦„

### 1. ê³ ê°ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ë™ì˜ê°€ í•„ìš”í•˜ë‹¤.
- ê° Resource Serverì— ë§ëŠ” ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ê²ƒìœ¼ë¡œ ë™ì˜ë¥¼ ì–»ëŠ” ê²ƒ

<br/>

### 2. ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
- scopeì˜ ê²½ìš°ì—ëŠ” Resource Serverì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ ì¤‘ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê¸°ëŠ¥

![oauth2](screenshot/oauth2.png)

<br/>
    
### 3. Resource Ownerê°€ Resource Serverë¡œ ìš”ì²­ì„ ë³´ë‚´ê²Œ ë˜ë©´
![oauth3](screenshot/oauth3.png)

<br/>

### 4. Resource ServerëŠ” ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì•ˆë˜ì–´ ìˆìœ¼ë©´ ë¡œê·¸ì¸ í™”ë©´ì„ ë³´ë‚¸ë‹¤.

![oauth4](screenshot/oauth4.png)

<br/>

### 5. ì´í›„, ë¡œê·¸ì¸ í›„ ë‹¤ì‹œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê·¸ë•Œì„œì•¼ Client Idì™€ redirect URLì´ ê°™ì€ì§€ í™•ì¸í•œë‹¤.

<br/>

### 6. ë‹¤ë¥´ë©´ ì¢…ë£Œí•˜ê³ , ê°™ìœ¼ë©´ Clientì—ê²Œ Scopeì™€ ê°™ì€ ê¸°ëŠ¥ ì œê³µí•˜ëŠ” ê²ƒì„ ë™ì˜í•˜ëŠ”ì§€ë¥¼ ë¬»ëŠ” í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë³´ë‚¸ë‹¤.
![oauth5](screenshot/oauth5.png)

<br/>

### 7. ë™ì˜ë¥¼ í•˜ê²Œ ë˜ë©´ Resource ServerëŠ” ë‹¤ìŒê³¼ ê°™ì€ user idì™€ ì œê³µí•œ ê¸°ëŠ¥ì„ ì €ì¥í•´ë‘”ë‹¤.
![oauth6](screenshot/oauth6.png)

<br/>

### 8. ì´í›„ Clientì—ê²Œ ë°”ë¡œ accessTokenì„ ë°œê¸‰í•˜ì§€ ì•Šê³  ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°œê¸‰í•œë‹¤.

<br/>

### 9. authorization codeë¥¼ Resource Ownerì—ê²Œ ì „ì†¡í•œë‹¤.
1. Location : https://client/callback?code=3
2. Headerì— Location ë¶™ì—¬ì„œ ë³´ëƒ„, ì˜ë¯¸ëŠ” Redirection 
3. Resource Serverê°€ Resource Owner ë¸Œë¼ìš°ì €ì—ê²Œ ìœ„ì˜ ì£¼ì†Œë¡œ ì´ë™í•˜ë¼ê³  ëª…ë ¹ì„ ë‚´ë¦° ê²ƒ

![oauth7](screenshot/oauth7.png)

<br/>

### 10. Resource Ownerì˜ ë¸Œë¼ìš°ì €ê°€ Header Locationì˜ ëª…ë ¹ì— ë”°ë¼ Clientì—ê²Œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

![oauth8](screenshot/oauth8.png)

<br/>

### 11. ê·¸ëŸ¬ë©´ ClientëŠ” Resource Serverì—ê²Œ ìì‹ ì´ ê°€ì§„ 4ê°€ì§€ ì •ë³´ë¥¼ ë³´ë‚¸ë‹¤
1. Client Id, Client Secret, redirect URL, authorization code
2. ì´ëŸ¬í•œ [authorization codeë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì„ í¬í•¨í•œ 4ê°€ì§€ ë°©ë²•](#í† í°-ë°œê¸‰-ë°©ì‹(grant-type)ì€-ì´-4ê°€ì§€)ì´ ìˆë‹¤.

<br/>

### 12. 4ê°€ì§€ê°€ ëª¨ë‘ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ í›„ì— access Tokenì„ ë°œê¸‰ í•œë‹¤.

![oauth9](screenshot/oauth9.png)

### 13. ì¸ì¦ í›„ì— authorization codeë¥¼ Clientì™€ Resource Serverì—ì„œ ì§€ìš´ë‹¤.

<br/>

### 14. ê·¸ë¦¬ê³  AccessTokenì„ ë°œê¸‰ í•´ì¤€ë‹¤.

<br/>

### 15. Clientê°€ AccessTokenìœ¼ë¡œ ì ‘ê·¼ì„ í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ê²ƒì„ ë³´ì¥í•œë‹¤.
- user id 1ì„ ê°€ì§„ ì‚¬ìš©ìì˜  ëŒ€í•œ ì •ë³´, ìœ íš¨í•œ ê¸°ëŠ¥ b, cë¥¼ accessToken 4ë¥¼ ê°€ì§„ Client í—ˆìš©

![oauth10](screenshot/oauth10.png)

<br/><br/>


## í† í° ë°œê¸‰ ë°©ì‹(grant type)ì€ ì´ 4ê°€ì§€

- ê¸°ë³¸ì ìœ¼ë¡œ í—¤ë”ì— authorization ê°’(clientid:secretkey base64 ì¸ì½”ë”©í•œ ê°’)ì„ ë„£ì–´ì„œ ìš”ì²­

<br/>

### 1. code (codeë¥¼ ë°œê¸‰ë°›ê³  codeë¡œ access token ë°œê¸‰)

1. codeÂ ë°œí–‰
    - ì•„ë˜Â urlì€Â ê¸°ë³¸Â oauth2.0Â ì½”ë“œÂ ë°œê¸‰Â URIë¡œÂ ì ˆì°¨Â ì™„ë£Œì‹œÂ redirect_uriÂ ë¡œÂ codeÂ ê°€Â ë°œí–‰ëœë‹¤.
    - URL : http://localhost:8080/oauth/authorize
    - Parameter
        - response_type=code
        - redirect_uri=ì½”ë“œ ì „ë‹¬ë°›ì„ URL
        - scope=read

<br/>

2. accessÂ tokenÂ ë°œí–‰
    - ë°œê¸‰ ë°›ì€ ì½”ë“œë¥¼ ê°€ì§€ê³  token ì„ ë°œí–‰ í•œë‹¤.
    - URL : http://localhost:8080/oauth/token
    - Parameter
        - grant_type=code
        - authorization_code=ë°œê¸‰ë°›ì€ì½”ë“œ
        - redirect_uri=ì½”ë“œ ì „ë‹¬ë°›ì€ URL

<br/>

### 2. password (id, pw ë¡œ access token ë°œê¸‰)

- access token ë°œí–‰
    - id, pw ë¡œ í† í°ì„ ë°”ë¡œ ë°œê¸‰ ë°›ì„ ìˆ˜ ìˆë‹¤.
    - URL : http://localhost:8080/oauth/token
    - Parameter
        - grant_type=password
        - username=ì•„ì´ë””
        - password=íŒ¨ìŠ¤ì›Œë“œ
        - scope=read

<br/>

### 3. client_credentials (ë°”ë¡œ access tokenÂ ë°œí–‰)

- ë‹¤ë¥¸ ì •ë³´ë¥¼ ìš”í•˜ì§€ ì•Šê³  authorization ì— clientid, secret keyë§Œ ë“±ë¡ëœ ì •ë³´ë©´ ë°”ë¡œ ë°œí–‰
- ê·¸ëŸ° íŠ¹ì„±ìœ¼ë¡œ ì •ë§ ë³„ë‹¤ë¥¸ ì¸ì¦ í•„ìš” ì—†ëŠ” ì‹ ë¢°ë„ê°€ ë†’ì€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œë§Œ í•´ë‹¹ ë°©ì‹ì„ í—ˆìš©
- í•´ë‹¹ ë°©ì‹ì€ ë³„ë‹¤ë¥¸ ì¸ì¦ì„ ìš”í•˜ì§€ ì•Šê¸°ì— ìœ„í—˜ì„±ì´ ìˆì–´ refresh_tokenì€ ë”°ë¡œ ë°œí–‰ í•˜ì§€ ì•ŠìŒ
- URL : http://localhost:8080/oauth/token
- Parameter
    1. grant_type=client_credentials
    2. scope=read
    

<br/>

### 4. refresh_token (refresh tokenìœ¼ë¡œ access token ë°œí–‰)

- í•´ë‹¹Â ë°©ì‹ì€Â 1,Â 2ë²ˆìœ¼ë¡œÂ ì¸ì¦ í›„Â ì¬Â ë¡œê·¸ì¸Â ì—†ì´Â ìë™Â ë¡œê·¸ì¸ì„Â êµ¬í˜„í•˜ê¸°Â ìœ„í•¨
- 1,2 ë°©ì‹ìœ¼ë¡œ access_token ë°œí–‰ê³¼ ë™ì‹œì— refresh_token ë„ ê°™ì´ ë°œí–‰í•´ì£¼ê¸°ì— ì–»ì€ refresh tokenë¡œ token ë°œí–‰ì´ ê°€ëŠ¥í•˜ë‹¤.
- URL : http://localhost:8080/oauth/token
- Parameter
    1. grant_type=refresh_token
    2. refresh_token=ì´ì „ì— ë°œê¸‰ë°›ì€ refresh token
    3. scope=read

<br/>

## Refresh Token
1. Access Tokenì€ ìˆ˜ëª…ì´ ìˆë‹¤.
    - ì§§ìœ¼ë©´ ëª‡ ì‹œê°„, ê¸¸ê²ŒëŠ” 60ì¼ 90ì¼ ë‹¨ìœ„ë¡œ ì‚´ì•„ìˆë‹¤.
    - ìˆ˜ëª…ì´ ëë‚˜ë©´ ë” ì´ìƒ APIì— ì ‘ì†í•´ë„ ë°ì´í„°ë¥¼ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

<br/>

2. ìˆ˜ëª…ì´ ëë‚  ë•Œ ë§ˆë‹¤ Access Tokenì„ ë‹¤ì‹œ ë°œê¸‰í•˜ê²Œ í•˜ëŠ” ê³¼ì •ì„ ì‚¬ìš©ìì—ê²Œ ê²ªê²Œ í•˜ë©´ ë¶ˆí¸

<br/>

3. oauth 2.0 RFC 
    - RFCëŠ” ì¸í„°ë„·ê³¼ ê´€ë ¨ëœ ì—¬ëŸ¬ê°€ì§€ í‘œì¤€ì•ˆ
    - [https://datatracker.ietf.org/doc/html/rfc6749#section-1.5](https://datatracker.ietf.org/doc/html/rfc6749#section-1.5)

<br/>
    
![oauth11](screenshot/oauth11.png)
    
### 1. A : ê¶Œí•œì„ íšë“ / í—ˆê°€ í•œë‹¤.
<br/>

### 2. B : Access / Refresh Token ë‘˜ ë‹¤ ë°œê¸‰ ë°›ëŠ”ë‹¤.
<br/>

### 3. C : Access Tokenìœ¼ë¡œ ì¸ì¦
<br/>

### 4. D : ë³´í˜¸ë˜ê³  ìˆëŠ” ìì›
<br/>

### 5. E : Access Tokenìœ¼ë¡œ ì¸ì¦
<br/>

### 6. F : ì¸ì¦ë˜ì§€ ì•Šì€ í† í°
<br/>

### 7. G : Refresh Tokenìœ¼ë¡œ ì¸ì¦
<br/>

### 8. H : Access Token ë‹¤ì‹œ ë°œê¸‰ ë°›ëŠ”ë‹¤.
- Refresh Tokenë„ ë‹¤ì‹œ ë°œê¸‰ ë˜ëŠ” ê³³ë„ ìˆë‹¤.
- **Google Doc - Refreshing an access token**
```json
// Request
POST /token HTTP/1.1
Host: oauth2.googleapis.com
Content-Type: application/x-www-form-urlencoded

client_id=your_client_id&
client_secret=your_client_secret&
refresh_token=refresh_token&
grant_type=refresh_token

// Response
{
    "access_token": "1/fFAGRNJru1FTz70BzhT3Zg",
    "expires_in": 3920,
    "scope": "https://www.googleapis.com/auth/drive.metadata.readonly",
    "token_type": "Bearer"
}
```

## ê¸°ìˆ  êµ¬í˜„

<br/>

## ì°¸ì¡°í•œ ì‚¬ì´íŠ¸
1. https://deeplify.dev/back-end/spring/oauth2-social-login

2. https://velog.io/@swchoi0329/ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ì™€-OAuth-2.0ìœ¼ë¡œ-ë¡œê·¸ì¸-ê¸°ëŠ¥-êµ¬í˜„#5-ì„¸ì…˜-ì •ì¥ì†Œë¡œ-ë°ì´í„°ë² ì´ìŠ¤-ì‚¬ìš©í•˜ê¸°

<br/>

## Front End êµ¬í˜„
- ìš”ì²­ì„ ë³´ë‚´ëŠ” URL & Redirect URL
``` html
<!-- êµ¬ê¸€ -->
<a class="social_btn" href="https://localhost:8080/oauth2/authorization/google?redirect_uri=https://localhost/oauth/redirect"></a>

<!-- ë„¤ì´ë²„ -->
<a class="social_btn" href="https://localhost:8080/oauth2/authorization/naver?redirect_uri=https://localhost/oauth/redirect"></a>

<!-- ì¹´ì¹´ì˜¤ -->
<a class="social_btn" href="https://localhost:8080/oauth2/authorization/kakao?redirect_uri=https://localhost/oauth/redirect"></a>

```

<br/>

## Back End êµ¬í˜„

### 1. aplication properties, gradle ì„¤ì • ë‚´ìš© ìƒëµ
<br/>

### 2. SecurityConfigì— ìš”ì²­ì„ ë°›ëŠ” ì½”ë“œë¥¼ êµ¬í˜„
```java
public class SecurityConfig extends WebSecurityConfigurerAdapter {
   
   ...

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http

                ...
                // ì¸ì¦ì´ í•„ìš”í•œ ë¶€ë¶„ êµ¬ê¸€ oauth2Loginë¶€ë¶„
                .antMatchers("/oauth2/authorization/**").authenticated() 
                .and()
                .logout()
                .logoutSuccessUrl("/")
                .and()
                .oauth2Login()
                .userInfoEndpoint()
                .userService(customOAuth2UserService)
                .and()
                .successHandler(oAuth2AuthenticationSuccessHandler)
                .failureHandler(oAuth2AuthenticationFailureHandler);
    }
}
```

<br/>

### 3. CustomOAuth2UserService êµ¬í˜„í•˜ì—¬ í† í° ë° íšŒì›ê°€ì… ìë™ ì²˜ë¦¬
```java
public class CustomOAuth2UserService implements OAuth2UserService<OAuth2UserRequest, OAuth2User> {

    private final UserRepository userRepository;

    @Override
    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {
        OAuth2UserService delegate = new DefaultOAuth2UserService();
        OAuth2User oAuth2User = delegate.loadUser(userRequest);

        // êµ¬ê¸€ / ë„¤ì´ë²„ / ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì¸ì§€ êµ¬ë¶„ìš©
        String registrationId = userRequest.getClientRegistration().getRegistrationId();

        // ì œê³µ íƒ€ì…
        String userNameAttributeName = userRequest.getClientRegistration()
                .getProviderDetails().getUserInfoEndpoint().getUserNameAttributeName();
                
        // ìœ ì € í† í°
        String userToken = userRequest.getAccessToken().getTokenValue();
        
        ...

        return new DefaultOAuth2User(
                Collections.singleton(new SimpleGrantedAuthority(user.getRoleKey())),
                attributes.getAttributes(),
                attributes.getNameAttributeKey());
    }
}
```

<br/>

### 4. OAuth2AuthenticationSuccessHandler / OAuth2AuthenticationFailureHandler êµ¬í˜„í•˜ì—¬ ì„±ê³µ, ì‹¤íŒ¨ê²°ê³¼ ë¦¬í„´
```java
@Component
public class OAuth2AuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {

    @Autowired
    private UserRepository userRepository;

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
                                        Authentication authentication) throws IOException {
            
        ...

        String url = makeRedirectUrl(JwtTokenUtil.getToken(user.getEmail()));

        getRedirectStrategy().sendRedirect(request, response, url);
    }

    private String makeRedirectUrl(String token) {
        return UriComponentsBuilder.fromUriString("https://localhost:8080/oauth/success")
                .queryParam("accessToken", token)
                .build().toUriString();
    }

}
```

<br/><br/>

## Trouble Shooting

<br/>

### ì˜¤ë¥˜ ì›ì¸
1. Redirectê°€ ì„±ê³µí•˜ì—¬ Tokenì€ ì •ìƒì ìœ¼ë¡œ ë„˜ì–´ê°”ìœ¼ë‚˜ ì•¡ì…˜ì´ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë‹¤ëŠ” í˜ì´ì§€ê°€ ë‚˜ì™”ë‹¤.
2. ìš°ì„  FrontEnd, BackEnd í†µí•© ë¹Œë“œ ë°°í¬ê°€ ì•„ë‹ˆë‹¤.
3. FrontEnd, BackEnd ê°ê°, Docker ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ë”°ë¡œ ëŒì•„ê°„ë‹¤.
4. ì„œë¡œ Port ë²ˆí˜¸ê°€ ë‹¤ë¦„
    - FronEnd : 443
    - BackEnd : 8443
5. SuccessHandler, FailureHandlerì—ì„œ Redirectë¥¼ í•  ë•Œ í¬íŠ¸ ë²ˆí˜¸ê°€ ë‹¬ë¼ ë¬¸ì œê°€ ìƒê²¼ë‹¤.


<br/>

### í•´ê²° ë°©ë²•
1. SuccessHandlerì— redirectí•˜ëŠ” ë¶€ë¶„ì— ë„ë©”ì¸:443/oauth/successë¡œ ì§ì ‘ í¬íŠ¸ ì§€ì •
2. Failureë„ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°”ê¿”, ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ìˆ˜ì •


<br/><br/><br/>

# WebRTC

## WebRTC

![openvidu2](screenshot/openvidu2.png)

- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì‚¬ì´íŠ¸ê°€ ì¤‘ê°„ì ì—†ì´ ë¸Œë¼ìš°ì € ê°„ì— ì˜¤ë””ì˜¤ë‚˜ ì˜ìƒ ë¯¸ë””ì–´ë¥¼ í¬ì°©í•˜ê³  ë§ˆìŒëŒ€ë¡œ ìŠ¤íŠ¸ë¦¼í•  ë¿ ì•„ë‹ˆë¼, ì„ì˜ì˜ ë°ì´í„°ë„ êµí™˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

- êµ¬ê¸€ì´ ì˜¤í”ˆì†ŒìŠ¤í™”í•œ í”„ë¡œì íŠ¸ì—ì„œ ê¸°ì›í•˜ì˜€ìœ¼ë©°, ê·¸ ë’¤ë¡œ êµ­ì œ ì¸í„°ë„· í‘œì¤€í™” ê¸°êµ¬(IETF)ê°€ í”„ë¡œí† ì½œ í‘œì¤€í™” ì‘ì—…ì„, W3Cê°€ API ì •ì˜ë¥¼ ì§„í–‰í•˜ì˜€ìœ¼ë©°, ìŒì„± í†µí™”, ì˜ìƒ í†µí™”, P2P íŒŒì¼ ê³µìœ ë“±ìœ¼ë¡œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/><br/>

## OpenVidu
- WebRTC ê¸°ìˆ ì„ ì´ìš©í•´ ë¯¸ë””ì–´ ì „ì†¡ì„ í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ í”„ë ˆì„ì›Œí¬ë¡œ, ì›¹ ë˜ëŠ” ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™”ìƒí†µí™”ë¥¼ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.

- WebRTC ë¯¸ë””ì–´ ì„œë²„ë¥¼ êµ¬í˜„í•˜ëŠ” ë° ì†Œëª¨ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í•´ì„œ ë¹ ë¥´ê²Œ ì‹¤ì‹œê°„ í†µì‹ ì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê²ƒì´ í° ì¥ì ì…ë‹ˆë‹¤.

<br/>

### OpenviduëŠ” í¬ê²Œ ë‘ íŒŒíŠ¸ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆê³  ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

![openvidu1](screenshot/openvidu1.png)

### Openvidu Browser
- í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì‚¬ìš©í•  ë¼ì´ë¸ŒëŸ¬ë¦¬
- í™”ìƒ í†µí™”ë¥¼ ë§Œë“¤ê³ , ë¹„ë””ì˜¤ì™€ ì˜¤ë””ì˜¤ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œë” ë„ì™€ì¤ë‹ˆë‹¤.
- Openviduì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì‘ì—…ì€ Openvidu ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ê´€ë¦¬ë©ë‹ˆë‹¤.

<br/>

### Openvidu Server
  - ì„œë²„ ì¸¡ ë‚´ìš©ì„ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜
  - Openvidu ë¸Œë¼ìš°ì €ì—ì„œ ì‘ì—…ì„ ìˆ˜ì‹ í•˜ê³ , ë¹„ë””ì˜¤ í†µí™”ë¥¼ ì„¤ì •í•˜ê³ , ê´€ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  - ëª…ì‹œì ìœ¼ë¡œ êµ¬í˜„í•  í•„ìš”ëŠ” ì—†ê³ , ì‹¤í–‰í•œ ë’¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” IP ì£¼ì†Œë§Œ ì•Œê³  ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.

<br/><br/>

## ì ìš©
- ëŠ˜ë¹„ìƒë‹´ì€ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ í™”ìƒ í†µí™”ë¥¼ í†µí•œ ê³ ë¯¼ í•´ì†Œ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- ì´ëŸ¬í•œ ì´ìœ ë¡œ ì›¹ ë¸Œë¼ìš°ì € ê°„ì— í”ŒëŸ¬ê·¸ì¸ì˜ ë„ì›€ ì—†ì´ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆëŠ” WebRTCë¥¼ ì±„íƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- ë˜, OpenViduëŠ” ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬ íŠ¹íˆ Vueì™€ì˜ í˜¸í™˜ì„±ì´ ë†’ê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ì˜ ì†ì‰¬ìš´ ì ìš©ì„ ìœ„í•´ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

<br/><br/>

## Trouble Shooting
- EC2 ì„œë²„ì— ì˜¨í”„ë¡œë¯¸ìŠ¤ ë°©ì‹ìœ¼ë¡œ openvidu ì„œë²„ ë°°í¬
- í™”ìƒ ì±„íŒ… ì…ì¥/ì±„íŒ… ê¸°ëŠ¥/ì´ëª¨ì§€ ê¸°ëŠ¥ì€ ê°€ëŠ¥í•˜ë‚˜, ìƒëŒ€ë°©ì˜ ë¹„ë””ì˜¤, ì˜¤ë””ì˜¤ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ” ìƒí™©
- Error : OpenVidu ì ‘ì† ì˜¤ë¥˜(CONNECT REFUSED)

<br/>

### ì˜¤ë¥˜ ì›ì¸: coturn ì„œë²„ ë¬¸ì œ
- OpenVidu ì„œë²„ http í¬íŠ¸ë¥¼ ë³€ê²½í•´ë„ ì ìš©ë˜ì§€ ì•Šê³ , 80ë²ˆ í¬íŠ¸ë¥¼ ì°¨ì§€í•¨. 

<br/>

### í•´ê²° ë°©ë²•: http í¬íŠ¸ ë³€ê²½ì„ í†µí•œ í•´ê²°
- í¬íŠ¸ ì´ìŠˆ í•´ê²°ì„ ìœ„í•´ ê¸°ì¡´ í”„ë¡ íŠ¸ì—”ë“œê°€ ê°€ì§€ê³  ìˆë˜ http í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì—¬ í•´ê²°í•¨.


<br/><br/><br/>


# Chatting System

## Web Socket

<br/>

### Web Socketì´ë€?

![ì±„íŒ…ì‹œìŠ¤í…œ_WebSocket](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_WebSocket.PNG)

- ì›¹ ì„œë²„ì™€ ì›¹ ë¸Œë¼ìš°ì €ê°„ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ í™˜ê²½ì„ ì œê³µí•´ì£¼ëŠ” ì‹¤ì‹œê°„ í†µì‹  ê¸°ìˆ ì…ë‹ˆë‹¤.
- HTTPì™€ ë‹¬ë¦¬ ì™„ì „í•œ ì´ì¤‘ í†µì‹ ì„ ì‚¬ìš©í•˜ì—¬ Web Socketì´ TCPì—ì„œ ë©”ì‹œì§€ë¥¼ ìŠ¤íŠ¸ë¦¬ë° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì–‘ë°©í–¥ìœ¼ë¡œ ì›í• ë•Œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©° statelessí•œ HTTPì— ë¹„í•´ ì˜¤ë²„í—¤ë“œê°€ ì ìœ¼ë¯€ë¡œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

### Web Socketì˜ í•„ìš”ì„±

- ì‹¤ì‹œê°„ ì–‘ë°©í–¥ ë°ì´í„° í†µì‹ ì´ í•„ìš”í•œ ê²½ìš°
- ë§ì€ ìˆ˜ì˜ ë™ì‹œ ì ‘ì†ìë¥¼ ìˆ˜ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°
- ë¸Œë¼ìš°ì €ì—ì„œ TCP ê¸°ë°˜ì˜ í†µì‹ ìœ¼ë¡œ í™•ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°
- ê°œë°œìì—ê²Œ ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ APIê°€ í•„ìš”í•  ê²½ìš°
- í´ë¼ìš°ë“œ í™˜ê²½ì´ë‚˜ ì›¹ì„ ë„˜ì–´ SOA ë¡œ í™•ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°

<br/>

### Web Socket ì ‘ì† ê³¼ì •
![WebSocketì ‘ì†ê³¼ì •](./screenshot/WebSocketì ‘ì†ê³¼ì •.png)
- ì›¹ì†Œì¼“ì„ ì´ìš©í•˜ì—¬ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ í†µì‹ ì„ í•˜ë ¤ë©´ ë¨¼ì € ì›¹ì†Œì¼“ ì ‘ì† ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤.
- ì›¹ì†Œì¼“ ì ‘ì† ê³¼ì •ì€ TCP/IP ì ‘ì† ê·¸ë¦¬ê³  ì›¹ì†Œì¼“ ì—´ê¸° HandShake ê³¼ì •ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.
- ì›¹ì†Œì¼“ë„ TCP/IPìœ„ì—ì„œ ë™ì‘í•˜ë¯€ë¡œ, ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” ì›¹ì†Œì¼“ì„ ì‚¬ìš©í•˜ê¸° ì „ì— ì„œë¡œ TCP/IP ì ‘ì†ì´ ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.
- TCP/IP ì ‘ì†ì´ ì™„ë£Œëœ í›„ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” ì›¹ì†Œì¼“ ì—´ê¸° HandShake ê³¼ì •ì„ ì‹œì‘í•œë‹¤.

<br/>

### ì›¹ì†Œì¼“ ì—´ê¸° HandShake
- í´ë¼ì´ì–¸íŠ¸ê°€ ë¨¼ì € HandShake ìš”ì²­ì„ ë³´ë‚´ê³  ì´ì— ëŒ€í•œ ì‘ë‹µì„ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ëŠ” êµ¬ì¡°ì´ë‹¤.
- ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ëŠ” HTTP 1.1 í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ê³¼ ì‘ë‹µì„ ë³´ë‚¸ë‹¤.
- ì•„ë˜ëŠ” Requestì™€ Responseì˜ ì˜ˆì‹œì´ë‹¤.

<br/>

### HandShake Request
- <b> GET </b> /chatHTTP/1.1 <br>
- <b> Host </b> : server.gorany.org<br>
- <b> Upgrade </b> : websocket<br>
- <b> Connection </b> : Upgrade<br>
- <b> Sec-WebSocket-Key </b> : dGhlIACqbSBcZQBub27jWG==<br>
- <b> Origin </b> : http://localhost:8080<br>
- <b> Sec-WebSocket-Version </b> : 13 <br>

<br/>

### HandShake Response
- <b> HTTP/1.1 101 </b> SwitchingProtocols
- <b> Upgrade </b> : websocket
- <b> Connection </b> : Upgrade
- <b> Sec-WebSocket-Accept </b> : s3pPWEBhTxaQ9kYSizhZRbH+xPo=

<br><br>

## SockJS
- SpringFrameworkì—ì„œì˜ Web Socketì„ í™œìš©í•  ë•Œ, ìë°” ê°œë°œìë“¤ì´ socket.ioë¥¼ ì“¸ ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•
- ìì²´ ìŠ¤íŒ©ìœ¼ë¡œ Web Socketì—ì„œ ì§€ì›í•˜ì§€ ëª»í•˜ëŠ” ë¸Œë¼ìš°ì € ë¶€ë¶„ì„ ê´€ë¦¬í•œë‹¤.
- ì„œë²„ ê°œë°œ ì‹œ Spring ì„¤ì •ì—ì„œ ì¼ë°˜ Web Socketìœ¼ë¡œ í†µì‹ í•  ì§€ SockJS í˜¸í™˜ìœ¼ë¡œ í†µì‹ í•  ì§€ ê²°ì •í•  ìˆ˜ ìˆìœ¼ë©°, í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” SockJS í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ ì„œë²„ì™€ í†µì‹ í•œë‹¤.

<br>

### <b>SockJSì˜ êµ¬ì„±</b>
- <b> SockJS Protocol </b> <br>
- <b> SockJS Javascript Client </b> - ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ <br>
- <b> SockJS Server </b> êµ¬í˜„ - Spring-websocket ëª¨ë“ˆì„ í†µí•´ ì œê³µ <br>
- <b> SockJS Java Client </b> - Spring-websocket ëª¨ë“ˆì„ í†µí•´ ì œê³µ (<b>Spring ver.4.1</b> ~) <br>

<br>

### SockJSì˜ ì „ì†¡ íƒ€ì…
<ol>
 <li> <b>WebSocket</b>
 <li> <b>HTTP Streaming</b>
 <li> <b>HTTP Long Polling</b>
</ol>
<br><br>

### SockJS Client
- SockJS ClientëŠ” ì„œë²„ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ "<b>GET/info</b>"ë¥¼ í˜¸ì¶œí•œë‹¤.
- ì„œë²„ê°€ WebSocketì„ ì§€ì›í•˜ëŠ”ì§€, ì „ì†¡ ê³¼ì •ì—ì„œ Cookies ì§€ì›ì´ í•„ìš”í•œì§€, ê·¸ë¦¬ê³  OCRSë¥¼ ìœ„í•œ Origin ì •ë³´ ë“±ì˜ ì •ë³´ë¥¼ ì‘ë‹µìœ¼ë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤.
- ëª¨ë“  ì „ì†¡ ìš”ì²­ì€ ë‹¤ìŒì˜ URL êµ¬ì¡°ë¥¼ ê°–ëŠ”ë‹¤.
  - https://host:prot/myApp/myEndpoint/{server-id}/{session-id}/{transport}
  - server-id : í´ëŸ¬ìŠ¤í„°ì—ì„œ ìš”ì²­ì„ ë¼ìš°íŒ…í•˜ëŠ”ë° ì‚¬ìš©í•˜ë‚˜ ì´ì™¸ì—ëŠ” ì˜ë¯¸ ì—†ìŒ
  - session-id : SockJS sessionì— ì†Œì†í•˜ëŠ” HTTP ìš”ì²­ê³¼ ì—°ê´€ì„± ìˆìŒ
  - transport : ì „ì†¡ íƒ€ì… (ì˜ˆ : websocket, xhr-streaming, xhr-polling)

<br>

### SockJS Enabling
``` java
    public void registerStompEndpoints(StompEndpointRegistry registry) {
        registry.addEndpoint("/chat")
                .setAllowedOriginPatterns("*")
                .withSockJS();
                // webSocketConfigì—ì„œ SockJSë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° ìœ„í•´
                // .withSockJS()ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.
                // setAllowedOriginPatterns("*")ì—ì„œ * ë¼ëŠ” ì™€ì¼ë“œ ì¹´ë“œë¥¼ ì‚¬ìš©í•˜ë©´
                // ë³´ì•ˆìƒì˜ ë¬¸ì œë¡œ ì „ì²´ë¥¼ í—ˆìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ì§ì ‘ í•˜ë‚˜ì”© ì§€ì •í•´ ì£¼ì–´ì•¼ í•œë‹¤ê³  í•œë‹¤.
    }
```
(ì—¬ê¸° ì‚¬ì´ì— ë‚˜ëˆŒ ë§ì´ ë“¤ì–´ê°€ë©´ ì¢‹ê² ìŒ)

```javascript
const connect = async function () {
      let socket = new SockJS("https://localhost:8080/chat");
      state.stompClient = Stomp.over(socket);
      await state.stompClient.connect(
        {},
        (frame) => {
          state.socketConnected = TextTrackCue;
          state.stompClient.subscribe("/send", (res) => {
            store.dispatch("root/chatRoomGetList", {
              userId: state.userInfo.id,
            });
            state.recvList.push(JSON.parse(res.body));
          });
        },
        (error) => {
          state.socketConnected = false;
        }
      );
    };
    // í”„ë¡ íŠ¸ ìª½ì—ì„œëŠ” ì„œë²„ì˜ í¬íŠ¸ë²ˆí˜¸ì™€ ë§ê²Œ 8443ìœ¼ë¡œ ì§€ì •í•´ ì£¼ì—ˆë‹¤.
```

<br>

### í—ˆìš©ëœ Origins
- Originì€ <b>Protocol, Host, Port<b> 3ê°œ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.
- http://localhost:8080/
  - protocol : http
  - host : localhost
  - port : 8080
- <b> 3ê°œ ë¶€ë¶„ì´ ëª¨ë‘ ë™ì¼í•œ ê²½ìš°ë§Œ ë™ì¼í•œ Originì´ë¼ê³  ë§í•œë‹¤. </b>
- Springframework 4.1.5ë¥¼ ê¸°ì¤€ìœ¼ë¡œ WebSocket ë° SockJSì˜ ê¸°ë³¸ ë™ì‘ì€ ë™ì¼í•œ Originìš”ì²­ë§Œ ìˆ˜ë½í•˜ëŠ” ê²ƒì´ë‹¤. 
- ëª¨ë“  ëª©ë¡ì´ë‚˜ íŠ¹ì • ëª©ë¡ì„ í—ˆìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë‹¤ìŒì˜ 3ê°€ì§€ í–‰ë™ì„ ì·¨í•  ìˆ˜ ìˆë‹¤.
    - <b> ë™ì¼í•œ ì˜¤ë¦¬ì§„ ìš”ì²­ë§Œ í—ˆìš©(default) </b>
        - ì´ ëª¨ë“œì—ì„œëŠ” SockJSê°€ í™œì„±í™”ë˜ë©´ iframe HTTP ì‘ë‹µ í—¤ì–´ X-Frame-Optionsê°€ 'SameOrigin'ìœ¼ë¡œ ì„¤ì •ëœë‹¤. 
        - JSONP ì „ì†¡ì€ ìš”ì²­ì˜ ì˜¤ë¦¬ì§„ í™•ì¸ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ë¹„í™œì„±í™”ëœë‹¤. ë”°ë¼ì„œ ì´ ëª¨ë“œê°€ í™œì„±í™”ëœ ê²½ìš° IE 6,7ì€ ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤.
    - <b> ì§€ì •ëœ Origin ëª©ë¡ í—ˆìš©</b>
        - ì´ ëª¨ë“œì—ì„œëŠ” ì§€ì •ëœ Originì€ ë°˜ë“œì‹œ http:// or https://ë¡œ ì‹œì‘í•´ì•¼ í•œë‹¤. 
        - ì´ ëª¨ë“œì—ì„œ SockJSê°€ í™œì„±í™”ë˜ë©´ iframe ì „ì†¡ì´ ë¹„í™œì„±í™”ë˜ë¯€ë¡œ IE 6~9ê¹Œì§€ëŠ” ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤.

    - <b> ëª¨ë“  Origin í—ˆìš© </b>
        - ì´ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ë©´ í—ˆê°€ëœ ì˜¤ë¦¬ì§„ ê°’ìœ¼ë¡œì¨ "*"ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì´ ëª¨ë“œì—ì„œëŠ” ëª¨ë“  ì „ì†¡(Send)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

<br/><br/>

## STOMP
- í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ë©”ì„¸ì§• í”„ë¡œí† ì½œì´ë‹¤.
- TCPë‚˜ Web Socketê³¼ ê°™ì€ ì‹ ë¢°ì„± ìˆëŠ” ì–‘ë°©í–¥ Streaming Network Protocolì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

![ì±„íŒ…ì‹œìŠ¤í…œ_STOMP](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_STOMP.png)

- STOMPëŠ” êµ¬ë…ì´ë¼ëŠ” ê°œë…ì„ í†µí•´ ë‚´ê°€ í†µì‹ í•˜ê³ ì í•˜ëŠ” ì£¼ì²´ë¥¼ íŒë‹¨í•˜ì—¬ ë¸Œë¡œì»¤ë¼ëŠ” ê°œë…ì„ ë‘ì–´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì† ê´€ì‹¬ì„ ê°€ì§€ë©° ì•„ë˜ì™€ ê°™ì€ ìš”ì²­ë“¤ì„ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.

<br/>

### Connect

![ì±„íŒ…ì‹œìŠ¤í…œ_STOMP1](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_STOMP1.png)

- ì—°ê²°ì— ê´€í•œ êµ¬ì¡°
- **ë²„ì „ ì •ë³´**ì™€ í˜„ì¬ì˜ ì„¸ì…˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

<br/>

### Subscribe

![ì±„íŒ…ì‹œìŠ¤í…œ_STOMP2](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_STOMP2.png)

- êµ¬ë…ì´ë¼ëŠ” ê°œë…ì„ ì´ìš©í•´ í˜„ì¬ ë©”ì„¸ì§€ì— ëŒ€í•œ ëª©ì ì§€ë¥¼ ì„¤ì •í•œë‹¤.

- Connect ì´í›„ì— Subscribeë¥¼ ì„¤ì •í•˜ê²Œ ëœë‹¤.
- ë“±ë¡ë˜ì§€ ì•Šì€ Subscribeë¥¼ í˜¸ì¶œ ì‹œ ì°¾ì„ ìˆ˜ ì—†ê¸°ì— ì •í™•í•œ í†µì‹ ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.

<br/>

### Message

![ì±„íŒ…ì‹œìŠ¤í…œ_STOMP3](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_STOMP3.png)

- ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•  ë•Œì˜ êµ¬ì¡°ì´ë‹¤.
- ë©”ì„¸ì§€ì˜ ì „ë‹¬ì§€ì™€ í•´ë‹¹ ë©”ì„¸ì§€ì˜ ì •ë³´ë“¤ì´ ì¶œë ¥ëœë‹¤.
- ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ì…ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

<br/>

### Disconnect

![ì±„íŒ…ì‹œìŠ¤í…œ_STOMP4](./screenshot/ì±„íŒ…ì‹œìŠ¤í…œ_STOMP4.png)

- ì—°ê²°ì„ ì¢…ë£Œí–ˆì„ ë•Œì˜ êµ¬ì¡°ì´ë‹¤.
- í†µì‹  ìƒíƒœì— ë”°ë¼ì„œ ì •í•´ì§„ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  í†µì‹ ì„ í•˜ê²Œ ëœë‹¤.


<br/><br/><br/>


# S3(Simple Storage Service)
- AWSì—ì„œ ì œê³µí•˜ëŠ” ê°ì²´ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤

- ì„œë¹„ìŠ¤ ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí•„ ì´ë¯¸ì§€ íŒŒì¼ë“¤ì„ ì—…ë¡œë“œ í•˜ì—¬ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©

<br/>

### 1. AWS S3 bucket ìƒì„±
``` yml
  1. [AWS -> S3 -> ë²„í‚· ë§Œë“¤ê¸°]ì—ì„œ ìƒˆë¡œìš´ ë²„í‚·ì„ ë§Œë“ ë‹¤.
  2. í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•´ì¤€ë‹¤.
  3. ê¶Œí•œ -> ë²„í‚· ì •ì±…ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ ì •ì±…ì„ ì„¤ì •í•œë‹¤.
  
  {
      "Version": "2012-10-17",
      "Id": "Policy1644805559372",
      "Statement": [
          {
              "Sid": "Stmt1644805556206",
              "Effect": "Allow",
              "Principal": "*",
              "Action": [
                  "s3:GetObject",
                  "s3:PutObject"
              ],
              "Resource": "arn:aws:s3:::[ë²„í‚· ì´ë¦„]/*"
          }
      ]
  } 
```

<br/>

### 2. AWS IAM ì‚¬ìš©ì ìƒì„±
```Text
  AWS ì•¡ì„¸ìŠ¤ ìœ í˜• : í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì•¡ì„¸ìŠ¤

  ê¶Œí•œ ì„¤ì • : AmazonS3FullAccess ì„ íƒ

  AccessKeyì™€ Secret Key ì €ì¥
```

<br/>

### 3.  build.gradleì— ì˜ì¡´ì„± ì¶”ê°€
```gradle
  implementation("io.awspring.cloud:spring-cloud-aws-context:2.3.3")

  implementation("org.springframework.cloud:spring-cloud-aws-autoconfigure:2.2.6.RELEASE")
```

<br/>

### 4. s3 config íŒŒì¼ ì¶”ê°€
```java
  public AmazonS3Client amazonS3Client() {
      BasicAWSCredentials awsCreds = new BasicAWSCredentials(accessKey, secretKey);
      
      return (AmazonS3Client) AmazonS3ClientBuilder.standard()
              .withRegion(region)
              .withCredentials(new AWSStaticCredentialsProvider(awsCreds))
              .build();
  }
```

<br/>

### 5. S3 service í´ë˜ìŠ¤ ì¶”ê°€

```java
  public String upload(MultipartFile uploadFile) throws IOException { ... }

  public void deleteFile(String fileName) { ... }

  private static String getUuid() { ... }

  private void uploadOnS3(final String findName, final File file) { ... }

  public String findImg(String img) { ... }

```